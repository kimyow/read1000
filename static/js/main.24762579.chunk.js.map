{"version":3,"sources":["firebase/features.js","const.js","hooks/reducer.js","components/Signin.js","components/UserCard.js","components/UserList.js","components/ResponsiveAppBar.js","components/UserAvatar.js","components/AvatarList.js","components/Review.js","components/ReviewList.js","components/Book.js","components/BookShelf.js","components/Home.js","App.js","reportWebVitals.js","index.js"],"names":["firebaseApp","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","fbDB","getAnalytics","getFirestore","fbAuth","getAuth","fbStorage","getStorage","googleAuthProvider","GoogleAuthProvider","SCREEN_MODE_INIT","SCREEN_MODE_SIGN_IN","SCREEN_MODE_USER_RANK_DAILY","SCREEN_MODE_USER_RANK_WEEKLY","SCREEN_MODE_USER_RANK_MONTHLY","SCREEN_MODE_GOOD_WRITER","SCREEN_MODE_BEST_READER","SCREEN_MODE_BOOK_SHELF","ACTION_CHANGE_MODE","ACTION_USER_SELECTED","MyContext","React","createContext","initValues","mode","userRankList","selectedUser","stateReducer","state","action","newState","console","log","type","Object","assign","user","Signin","useContext","dispatch","className","Container","sx","display","justifyContent","alignItems","marginTop","Button","onClick","signInWithPopup","then","result","token","credentialFromResult","accessToken","catch","error","errorCode","code","errorMessage","message","email","credential","credentialFromError","login","queryClientInfo","profileId","a","q","doc","getDoc","UserCard","userItem","screenMode","userUrl","useState","imageUrl","setImageUrl","clientInfo","setClientInfo","useEffect","storageRef","ref","getDownloadURL","value","window","localStorage","setItem","JSON","stringify","e","data","readNum","read","like","Card","width","minWidth","maxWidth","margin","CardActionArea","handleCardClick","CardMedia","component","alt","height","image","CardContent","Typography","gutterBottom","variant","profileName","color","onlineMessage","age","goal","review","CardActions","size","getWeekOfYear","currentDate","oneJan","Date","getFullYear","numberOfDays","Math","floor","getDay","queryCallAsync","date","path","retrieveNum","getMonth","getDate","query","collection","where","orderBy","limit","Promise","resolve","getDocs","UserList","setError","userList","setUserList","r","itemList","forEach","push","useMemo","Box","textAlign","verticalAlign","flexDirection","flexWrap","length","map","i","pages","settings","HideOnScroll","props","children","trigger","useScrollTrigger","target","undefined","Slide","appear","direction","in","ResponsiveAppBar","logout","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","filter","page","getDefaultTitle","title","setTitle","downloadUrl","photoURL","handleCloseNavMenu","item","innerText","dataset","index","parentElement","AppBar","Toolbar","disableGutters","noWrap","mr","xs","md","flexGrow","IconButton","event","currentTarget","Menu","id","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","MenuItem","my","Tooltip","p","Avatar","src","mt","setting","UserAvatar","imageLink","setImageLink","AvatarList","users","avatar_list","Stack","spacing","Review","writerEmail","writerProfileId","ListItem","ListItemAvatar","ListItemText","primary","secondary","bodyMessage","queryReviewListAsync","isbn","ReviewList","reviewList","setReviewList","style","List","CircularProgress","dialogStyle","queryBookDetails","Book","book","imageBigUrl","setImageBigUrl","setOpen","bookDetails","setBookDetails","bookThumbnailUrl","handleClickOpen","imageLinkBig","LoadBookDetails","startsWith","readDate","dateStr","Dialog","scroll","DialogContent","DialogTitle","onError","readPeople","DialogContentText","Divider","DialogActions","BookShelf","contents","setContents","initSqlJs","locateFile","filename","SQL","url","xhr","XMLHttpRequest","responseType","onload","blob","response","uInt8Array","Uint8Array","Database","exec","values","send","books","slice","padding","marginLeft","Home","signOut","App","useReducer","authUser","setAuthUser","unlisten","onAuthStateChanged","useFirebaseAuthentication","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.24762579.chunk.js","sourcesContent":["import {initializeApp} from \"firebase/app\";\nimport {getAnalytics} from \"firebase/analytics\";\nimport {getFirestore} from \"firebase/firestore\";\nimport {getAuth, GoogleAuthProvider} from \"firebase/auth\";\nimport {getStorage} from \"firebase/storage\";\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyCGerFrxYZ2_MfRCURUdsqMuD2-9V-B7g4\",\n\tauthDomain: \"readbooks-164200.firebaseapp.com\",\n\tdatabaseURL: \"https://readbooks-164200.firebaseio.com\",\n\tprojectId: \"readbooks-164200\",\n\tstorageBucket: \"readbooks-164200.appspot.com\",\n\tmessagingSenderId: \"451518411017\",\n\tappId: \"1:451518411017:web:cced9b89a6030da16963d8\",\n\tmeasurementId: \"G-8WQD7EGSVQ\"\n};\n\nexport const firebaseApp = initializeApp(firebaseConfig);\nexport const fbAnalytics = getAnalytics(firebaseApp);\nexport const fbDB = getFirestore(firebaseApp);\nexport const fbAuth = getAuth(firebaseApp);\nexport const fbStorage = getStorage(firebaseApp)\nexport const googleAuthProvider = new GoogleAuthProvider();","\nexport const SCREEN_MODE_INIT = \"init\";\nexport const SCREEN_MODE_SIGN_IN = \"sign-in\";\nexport const SCREEN_MODE_USER_RANK_DAILY = \"user-rank-daily\";\nexport const SCREEN_MODE_USER_RANK_WEEKLY = \"user-rank-weekly\";\nexport const SCREEN_MODE_USER_RANK_MONTHLY = \"user-rank-monthly\";\nexport const SCREEN_MODE_GOOD_WRITER = \"good-writer\";\nexport const SCREEN_MODE_FAMOUS_BOOK = \"famous-book\";\nexport const SCREEN_MODE_RECENT_REVIEW = \"recent-review\";\nexport const SCREEN_MODE_BEST_READER = \"best-reader\";\nexport const SCREEN_MODE_FIND_USER = \"find-user\";\nexport const SCREEN_MODE_BOOK_SHELF = \"book-shelf\";\n\nexport const ACTION_CHANGE_MODE = \"change-mode\";\nexport const ACTION_USER_RANK_DATA_RECEIVED = \"user-rank-data-received\";\nexport const ACTION_USER_SELECTED = \"user-selected\";","import React from 'react';\nimport {\n\tACTION_CHANGE_MODE,\n\tACTION_USER_RANK_DATA_RECEIVED,\n\tACTION_USER_SELECTED,\n\tSCREEN_MODE_BOOK_SHELF,\n\tSCREEN_MODE_INIT\n} from \"../const\";\n\nexport const MyContext = React.createContext({});\n\nexport const initValues = {\n\tmode: SCREEN_MODE_INIT,\n\tuserRankList: null,\n\tselectedUser: null\n}\n\nexport const stateReducer = (state, action) => {\n\tconsole.log(\"reducer called~!\", state, action);\n\tlet newState;\n\tswitch (action.type) {\n\t\tcase ACTION_CHANGE_MODE: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tmode: action.mode\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_USER_RANK_DATA_RECEIVED: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tuserRankList: action.userRankList\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_USER_SELECTED: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tselectedUser: action.user,\n\t\t\t\tmode: SCREEN_MODE_BOOK_SHELF\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tnewState = initValues;\n\t}\n\tconsole.log(\"reducer return ===>\", newState);\n\treturn newState;\n}\n\nexport default stateReducer;","import {ACTION_CHANGE_MODE, SCREEN_MODE_SIGN_IN, SCREEN_MODE_USER_RANK_DAILY} from \"../const\";\nimport {fbAuth, googleAuthProvider} from \"../firebase/features\";\nimport {GoogleAuthProvider, signInWithPopup} from \"firebase/auth\";\nimport {useContext} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {Button, Container} from \"@mui/material\";\n\n\nconst login = (dispatch) => {\n\tsignInWithPopup(fbAuth, googleAuthProvider)\n\t\t.then((result) => {\n\t\t\t// This gives you a Google Access Token. You can use it to access the Google API.\n\t\t\tconst credential = GoogleAuthProvider.credentialFromResult(result);\n\t\t\tconst token = credential.accessToken;\n\t\t\t// The signed-in user info.\n\t\t\tconst user = result.user;\n\t\t\t// ...\n\t\t\tconsole.log(\"로그인 완료~!!\", user, token);\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: SCREEN_MODE_USER_RANK_DAILY})\n\t\t}).catch((error) => {\n\t\t// Handle Errors here.\n\t\tconst errorCode = error.code;\n\t\tconst errorMessage = error.message;\n\t\t// The email of the user's account used.\n\t\tconst email = error.email;\n\t\t// The AuthCredential type that was used.\n\t\tconst credential = GoogleAuthProvider.credentialFromError(error);\n\t\tconsole.log('error=>', errorCode, errorMessage, email, credential);\n\t\tconsole.log(\"로그인 실패~!!\");\n\t});\n}\n\n\nconst Signin = () => {\n\tconst {state, dispatch} = useContext(MyContext);\n\tconsole.log('Signin state=>', state);\n\n\tconst mode = state.mode;\n\n\tconsole.log('signin render()', mode)\n\tif (mode !== SCREEN_MODE_SIGN_IN) {\n\t\tconsole.log(\"signin hidden return\")\n\t\treturn (\n\t\t\t<div className=\"hidden\"/>\n\t\t)\n\t}\n\tconsole.log(\"signin general return\")\n\treturn (\n\t\t<Container sx={{\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tmarginTop: 20\n\t\t}}>\n\t\t\t<Button onClick={\n\t\t\t\t()=> {\n\t\t\t\t\tlogin(dispatch);\n\t\t\t\t}\n\t\t\t}>Google 로 로그인</Button>\n\t\t</Container>\n\t)\n}\n\nexport default Signin;","import {Button, Card, CardActionArea, CardActions, CardContent, CardMedia} from \"@mui/material\";\nimport Typography from \"@mui/material/Typography\";\nimport {useContext, useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbDB, fbStorage} from \"../firebase/features\";\nimport {doc, getDoc} from \"firebase/firestore\";\nimport {\n\tACTION_USER_SELECTED,\n\tSCREEN_MODE_GOOD_WRITER,\n\tSCREEN_MODE_USER_RANK_DAILY,\n\tSCREEN_MODE_USER_RANK_MONTHLY,\n\tSCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {MyContext} from \"../hooks/reducer\";\n\nconst queryClientInfo = async (email, profileId) => {\n\tconst q = doc(fbDB, 'ClientInfoDataBase', `${email}_${profileId}`);\n\treturn await getDoc(q);\n}\n\nconst handleCardClick = (dispatch, clientInfo) => {\n\tdispatch({type: ACTION_USER_SELECTED, user: clientInfo});\n}\n\nconst UserCard = ({userItem, screenMode}) => {\n\tconst {dispatch} = useContext(MyContext);\n\tconst userUrl = userItem.email ? `${userItem.email}_${userItem.profileId}`: '';\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [clientInfo, setClientInfo] = useState({});\n\tconsole.log(\"UserCard render()...\", userItem);\n\n\tuseEffect(() => {\n\t\ttry {\n\t\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('download_url=', value)\n\t\t\t\twindow.localStorage.setItem(userUrl, JSON.stringify(value));\n\t\t\t\tsetImageUrl(value)\n\t\t\t});\n\t\t} catch (e) {\n\n\t\t}\n\t}, [userItem]);\n\n\tuseEffect(()=> {\n\t\ttry {\n\t\t\tqueryClientInfo(userItem.email, userItem.profileId).then(doc => {\n\t\t\t\tconsole.log(\"clientInfo =>\", doc.data());\n\t\t\t\tsetClientInfo(doc.data());\n\t\t\t});\n\t\t} catch (e) {\n\n\t\t}\n\n\t}, [userItem]);\n\n\tlet readNum = '';\n\n\tif (screenMode === SCREEN_MODE_USER_RANK_DAILY) {\n\t\treadNum = `오늘 총 ${userItem.read}권 읽었습니다.`;\n\t} else if (screenMode === SCREEN_MODE_USER_RANK_WEEKLY) {\n\t\treadNum = `이번 주에 총 ${userItem.read}권 읽었습니다.`;\n\t} else if (screenMode === SCREEN_MODE_USER_RANK_MONTHLY) {\n\t\treadNum = `이번 달에 총 ${userItem.read}권 읽었습니다.`;\n\t} else if (screenMode === SCREEN_MODE_GOOD_WRITER) {\n\t\treadNum = `좋아요: ${userItem.like}`;\n\t}\n\n\treturn (\n\t\t<Card sx={{ width: 280, minWidth: 245, maxWidth: 345, margin: 1}}>\n\t\t\t<CardActionArea\n\t\t\t\tonClick={() => {handleCardClick(dispatch, clientInfo);}}>\n\t\t\t\t<CardMedia\n\t\t\t\t\tcomponent=\"img\"\n\t\t\t\t\talt=\"profile image\"\n\t\t\t\t\theight=\"300em\"\n\t\t\t\t\timage={imageUrl}\n\t\t\t\t/>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography gutterBottom variant=\"h5\" component=\"div\">\n\t\t\t\t\t\t{clientInfo.profileName}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body1\" color=\"text.primary\">\n\t\t\t\t\t\t{clientInfo.onlineMessage}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant=\"body1\" color=\"text.primary\">\n\t\t\t\t\t\t{readNum}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography sx={{marginTop: 1}} variant=\"body2\" color=\"text.secondary\">\n\t\t\t\t\t\t나이: {clientInfo.age} <br/>\n\t\t\t\t\t\t목표: {clientInfo.goal} <br/>\n\t\t\t\t\t\t읽은 책: {clientInfo.read} 권 <br/>\n\t\t\t\t\t\t{clientInfo.review ? `작성한 리뷰: ${clientInfo.review} 개`:`작성한 리뷰: 0 개`} <br/>\n\t\t\t\t\t\t{clientInfo.like ? `좋아요: ${clientInfo.like}`: ``}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\t\t\t</CardActionArea>\n\t\t\t<CardActions>\n\t\t\t\t<Button size=\"small\">Share</Button>\n\t\t\t\t<Button size=\"small\">Learn More</Button>\n\t\t\t</CardActions>\n\t\t</Card>\n\t);\n}\n\nexport default UserCard;","import {\n    SCREEN_MODE_BEST_READER,\n    SCREEN_MODE_FAMOUS_BOOK,\n    SCREEN_MODE_GOOD_WRITER,\n    SCREEN_MODE_RECENT_REVIEW,\n    SCREEN_MODE_USER_RANK_DAILY,\n    SCREEN_MODE_USER_RANK_MONTHLY,\n    SCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {collection, getDocs, limit, orderBy, query, where} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport {useContext, useEffect, useMemo, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport UserCard from \"./UserCard\";\nimport Box from \"@mui/material/Box\";\n\n\nconst getWeekOfYear = (currentDate) => {\n    const oneJan = new Date(currentDate.getFullYear(),0,1);\n    const numberOfDays = Math.floor((currentDate - oneJan) / (24 * 60 * 60 * 1000));\n    return Math.floor((currentDate.getDay() + 1 + numberOfDays) / 7);\n}\n\nconst queryCallAsync = async (mode) => {\n    const date = new Date();\n    let path = ``;\n    let q = null;\n\n    console.log(mode);\n\n    const retrieveNum = 4;\n\n    if (mode === SCREEN_MODE_USER_RANK_DAILY) {\n        path = `UserRank/Rank_Day_${date.getFullYear()}_${date.getMonth() + 1}_${date.getDate()}/Rank_Day_${date.getFullYear()}_${date.getMonth() + 1}_${date.getDate()}`;\n    } else if (mode === SCREEN_MODE_USER_RANK_WEEKLY) {\n        path = `UserRank/Rank_Week_${date.getFullYear()}_${getWeekOfYear(date)}/Rank_Week_${date.getFullYear()}_${getWeekOfYear(date)}`;\n    } else if (mode === SCREEN_MODE_USER_RANK_MONTHLY) {\n        path = `UserRank/Rank_Month_${date.getFullYear()}_${date.getMonth() + 1}/Rank_Month_${date.getFullYear()}_${date.getMonth() + 1}`;\n    } else if (mode === SCREEN_MODE_BEST_READER) {\n        path = `ClientInfoDataBase`;\n    } else if (mode === SCREEN_MODE_GOOD_WRITER) {\n        path = \"ClientInfoDataBase\";\n        q = query(collection(fbDB, path), where(\"like\", \">\", 0), orderBy(\"like\", \"desc\"), limit(retrieveNum));\n    } else if (mode === SCREEN_MODE_FAMOUS_BOOK) {\n        path = 'Books';\n    } else if (mode === SCREEN_MODE_RECENT_REVIEW) {\n        path = \"MessageDataBase\";\n        q = query(collection(fbDB, path), orderBy(\"updatedDate\", \"desc\"), limit(retrieveNum));\n    }\n    console.log(\"query path = \", path);\n\n    if (!path) {\n        return new Promise((resolve) => {\n            resolve([]);\n        });\n    }\n\n    if (q === null)\n        q = query(collection(fbDB, path), where(\"read\", \">\", 0), orderBy(\"read\", \"desc\"), limit(retrieveNum));\n    return await getDocs(q)\n}\n\nconst UserList = () => {\n    const {state} = useContext(MyContext);\n    const [error, setError] = useState(null);\n    const [userList, setUserList] = useState(null);\n    const mode = state.mode;\n    console.log('################ UserList render() userList=>', mode, userList);\n\n    useEffect( () => {\n        try {\n            setError(null);\n            setUserList(null);\n            queryCallAsync(mode).then(r => {\n                let itemList = [];\n                r.forEach((doc) => {\n                    const data = doc.data();\n                    itemList.push(data);\n                });\n                console.log(\"UserList ===> itemList ==> \", itemList);\n                setUserList(itemList);\n            });\n        } catch (e) {\n            setError(e);\n        }\n    }, [mode]);\n\n    const currentMode = useMemo(() => {\n\n    }, []);\n\n    if (mode !== SCREEN_MODE_USER_RANK_MONTHLY &&\n        mode !== SCREEN_MODE_USER_RANK_WEEKLY &&\n        mode !== SCREEN_MODE_USER_RANK_DAILY &&\n        mode !== SCREEN_MODE_BEST_READER &&\n        mode !== SCREEN_MODE_GOOD_WRITER)\n        return (\n            <div />\n        )\n\n    if (error) return (\n        <Box marginTop='10em' sx={{\n            textAlign: 'center',\n            verticalAlign: 'middle',\n            height: '100rem'\n        }}>\n            <h5>데이터 로딩중에 오류가 발생했습니다. {error}</h5>\n        </Box>\n    );\n\n    if (userList === null) return (\n        <Box marginTop='10em' sx={{\n            textAlign: 'center',\n            verticalAlign: 'middle',\n            height: '100rem'\n        }}>\n            <h5>데이타를 로딩중입니다...</h5>\n        </Box>\n    );\n\n    return (\n        <Box marginTop='5em' sx={{\n            width: '100%',\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'row',\n            flexWrap: 'wrap'\n        }}>\n            {\n                userList && userList.length > 0 ?\n                        userList.map((user, i) => <UserCard key={\"\" + i} userItem={user} screenMode={mode}/>) :\n                    <div>\n                        <h2>데이타를 로딩중입니다...</h2>\n                    </div>\n            }\n        </Box>\n    )\n}\n\nexport default UserList","import * as React from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport Menu from '@mui/material/Menu';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport Container from '@mui/material/Container';\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport Tooltip from '@mui/material/Tooltip';\nimport MenuItem from '@mui/material/MenuItem';\nimport {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {\n\tACTION_CHANGE_MODE,\n\tSCREEN_MODE_BEST_READER,\n\tSCREEN_MODE_FAMOUS_BOOK, SCREEN_MODE_FIND_USER,\n\tSCREEN_MODE_GOOD_WRITER, SCREEN_MODE_INIT, SCREEN_MODE_RECENT_REVIEW, SCREEN_MODE_SIGN_IN,\n\tSCREEN_MODE_USER_RANK_DAILY, SCREEN_MODE_USER_RANK_MONTHLY,\n\tSCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\nimport {Slide, useScrollTrigger} from \"@mui/material\";\nimport PropTypes from \"prop-types\";\n\nconst pages = [\n\t{\n\t\tmode: SCREEN_MODE_GOOD_WRITER,\n\t\tvalue: '좋은 글을 쓰는 친구들',\n\t},\n\t// {\n\t// \tmode: SCREEN_MODE_FAMOUS_BOOK,\n\t// \tvalue: '인기 도서'\n\t// },\n\t// {\n\t// \tmode: SCREEN_MODE_RECENT_REVIEW,\n\t// \tvalue: '리뷰'\n\t// },\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_DAILY,\n\t\tvalue: '오늘의 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_WEEKLY,\n\t\tvalue: '주간 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_MONTHLY,\n\t\tvalue: '월간 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_BEST_READER,\n\t\tvalue: '베스트 리더'\n\t},\n\t// {\n\t// \tmode: SCREEN_MODE_FIND_USER,\n\t// \tvalue: '친구 찾기'\n\t// }\n];\n\nconst settings = ['Profile', 'Account', 'Dashboard', 'Logout'];\n\nconst HideOnScroll = (props) => {\n\tconst { children, window } = props;\n\t// Note that you normally won't need to set the window ref as useScrollTrigger\n\t// will default to window.\n\t// This is only being set here because the demo is in an iframe.\n\tconst trigger = useScrollTrigger({\n\t\ttarget: window ? window() : undefined,\n\t});\n\n\treturn (\n\t\t<Slide appear={false} direction=\"down\" in={!trigger}>\n\t\t\t{children}\n\t\t</Slide>\n\t);\n}\n\nHideOnScroll.propTypes = {\n\tchildren: PropTypes.element.isRequired,\n\t/**\n\t * Injected by the documentation to work in an iframe.\n\t * You won't need it on your project.\n\t */\n\twindow: PropTypes.func,\n};\n\nconst getDefaultTitle = (mode) => {\n\n\tconst result = pages.filter(page => mode === page.mode);\n\tif (result.length > 0) {\n\t\tconsole.log(\"getDefaultTitle=>\", result);\n\t\treturn result[0].value;\n\t} else {\n\t\treturn '천권읽기';\n\t}\n}\n\nconst ResponsiveAppBar = (props) => {\n\tconst {state, dispatch, logout} = useContext(MyContext);\n\tconst user = props.user;\n\tconst [anchorElNav, setAnchorElNav] = useState(null);\n\tconst [anchorElUser, setAnchorElUser] = useState(null);\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [title, setTitle] = useState(getDefaultTitle(SCREEN_MODE_INIT));\n\n\tconsole.log(\"ResponsiveAppBar title=>\", title, state.mode);\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\tconst userUrl = `${user.email}`;\n\t\t\tconst downloadUrl = user.photoURL;\n\t\t\tconsole.log(\"ResponsiveAppBar downloadUrl=>\", downloadUrl);\n\n\t\t\tif (!downloadUrl) {\n\t\t\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\t\tconsole.log('Me download_url=', value)\n\t\t\t\t\tsetImageUrl(value)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetImageUrl(downloadUrl);\n\t\t\t}\n\t\t}\n\t}, [user]);\n\n\n\n\tconst handleOpenNavMenu = (event) => {\n\t\tconsole.log(\"handleOpenNavMenu=>\", event.currentTarget);\n\t\tsetAnchorElNav(event.currentTarget);\n\t};\n\tconst handleOpenUserMenu = (event) => {\n\t\tconsole.log(\"handleOpenUserMenu=>\", event.currentTarget);\n\t\tsetAnchorElUser(event.currentTarget);\n\t};\n\n\tconst handleCloseNavMenu = (item) => {\n\t\tconsole.log(\"handleCloseNavMenu\", item);\n\t\tsetAnchorElNav(null);\n\t\tif (item.target.innerText === 'Logout') {\n\t\t\tconsole.log('Logout~!!!')\n\t\t\tsetAnchorElUser(null);\n\t\t\tsetImageUrl('');\n\t\t\tlogout(dispatch);\n\t\t\treturn;\n\t\t}\n\n\t\tif (item.target.dataset.index) {\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: item.target.dataset.index});\n\t\t} else if(item.target.parentElement.dataset.index) {\n\t\t\tsetTitle(item.target.innerText);\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: item.target.parentElement.dataset.index});\n\t\t}\n\t};\n\n\tconst handleCloseUserMenu = () => {\n\t\tsetAnchorElUser(null);\n\t};\n\n\tlet _className='';\n\tif (state.mode === SCREEN_MODE_SIGN_IN) {\n\t\t_className = \"hidden\";\n\t}\n\treturn (\n\t\t<HideOnScroll {...props}>\n\t\t<AppBar>\n\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t<Toolbar disableGutters>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tsx={{ mr: 2, display: { xs: 'none', md: 'flex' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\t천권읽기\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Box sx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={handleOpenNavMenu}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\tanchorEl={anchorElNav}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\topen={Boolean(anchorElNav)}\n\t\t\t\t\t\t\tonClose={handleCloseNavMenu}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tdisplay: { xs: 'block', md: 'none' },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t\t\t<MenuItem key={page.mode}\n\t\t\t\t\t\t\t\t          data-index={page.mode} onClick={handleCloseNavMenu}>\n\t\t\t\t\t\t\t\t\t<Typography textAlign=\"center\">{page.value}</Typography>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tsx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' } }}>\n\t\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tkey={page.mode}\n\t\t\t\t\t\t\t\tdata-index={page.mode}\n\t\t\t\t\t\t\t\tonClick={handleCloseNavMenu}\n\t\t\t\t\t\t\t\tsx={{ my: 2, color: 'white', display: 'block' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page.value}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box sx={{ flexGrow: 0 }}>\n\t\t\t\t\t\t<Tooltip title=\"Open settings\">\n\t\t\t\t\t\t\t<IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n\t\t\t\t\t\t\t\t<Avatar alt=\"Remy Sharp\" src={imageUrl} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tsx={{ mt: '45px' }}\n\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\tanchorEl={anchorElUser}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\topen={Boolean(anchorElUser)}\n\t\t\t\t\t\t\tonClose={handleCloseUserMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{settings.map((setting) => (\n\t\t\t\t\t\t\t\t<MenuItem key={setting} onClick={handleCloseNavMenu}>\n\t\t\t\t\t\t\t\t\t<Typography textAlign=\"center\">{setting}</Typography>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Box>\n\t\t\t\t</Toolbar>\n\t\t\t</Container>\n\t\t</AppBar>\n\t\t</HideOnScroll>\n\t);\n};\n\nexport default ResponsiveAppBar;\n","import Avatar from \"@mui/material/Avatar\";\nimport {useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\n\n\nconst UserAvatar = ({user}) => {\n\tconst [imageLink, setImageLink] = useState(null);\n\tconst userUrl = user.email ? `${user.email}_${user.profileId}`: '';\n\n\tconsole.log(\"UserAvatar====>\", user);\n\tuseEffect(() => {\n\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\tconsole.log('download_url=', value)\n\t\t\tsetImageLink(value)\n\t\t});\n\t}, [user]);\n\n\treturn (\n\t\t<Avatar src={imageLink} alt=\"No image\"/>\n\t);\n}\n\nexport default UserAvatar;","import * as React from 'react';\nimport Stack from '@mui/material/Stack';\nimport UserAvatar from \"./UserAvatar\";\n\nconst AvatarList = ({users}) => {\n\n\tlet avatar_list = []\n\tusers.forEach(user => {\n\t\tavatar_list.push(<UserAvatar user={user} />);\n\t})\n\n\n\treturn (\n\t\t<Stack\n\t\t\tmt={2} direction=\"row\" spacing={2}>\n\t\t\t{avatar_list}\n\t\t</Stack>\n\t);\n}\n\nexport default AvatarList;","import {ListItem, ListItemAvatar, ListItemText} from \"@mui/material\";\nimport UserAvatar from \"./UserAvatar\";\nimport {doc, getDoc} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport {useEffect, useState} from \"react\";\n\nconst queryClientInfo = async (email, profileId) => {\n\tconst q = doc(fbDB, 'ClientInfoDataBase', `${email}_${profileId}`);\n\treturn await getDoc(q);\n}\n\nconst Review = ({review}) => {\n\tconst [clientInfo, setClientInfo] = useState(null);\n\tconsole.log(\"Review =======> \", review);\n\n\tconst user = {\n\t\temail: review.writerEmail,\n\t\tprofileId: review.writerProfileId\n\t};\n\n\tuseEffect(() => {\n\t\tqueryClientInfo(user.email, user.profileId).then(doc => {\n\t\t\tconsole.log(\"clientInfo =>\", doc.data());\n\t\t\tsetClientInfo(doc.data());\n\t\t});\n\t}, [])\n\n\treturn (\n\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t<ListItemAvatar>\n\t\t\t\t<UserAvatar alt=\"No image\" user={user}/>\n\t\t\t</ListItemAvatar>\n\t\t\t<ListItemText\n\t\t\t\tprimary={\n\t\t\t\t\tclientInfo?\n\t\t\t\t\t\tclientInfo.profileName:\"\"\n\t\t\t\t}\n\t\t\t\tsecondary={\n\t\t\t\t\treview.bodyMessage\n\t\t\t\t}\n\t\t\t/>\n\t\t</ListItem>\n\t);\n}\n\nexport default Review;","import {useEffect, useState} from \"react\";\nimport {CircularProgress, List} from \"@mui/material\";\nimport {collection, getDocs, limit, orderBy, query, where} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport Review from \"./Review\";\nimport Typography from \"@mui/material/Typography\";\n\nconst queryReviewListAsync = async (isbn) => {\n\tconst q = query(collection(fbDB, 'MessageDataBase'), where(\"isbn\", \"==\", isbn), orderBy(\"updatedDate\", \"desc\"), limit(20));\n\treturn await getDocs(q)\n}\n\nconst ReviewList = ({isbn}) => {\n\tconst [reviewList, setReviewList] = useState(null);\n\tconsole.log(\"ReviewList ===>\", isbn);\n\n\tuseEffect( () => {\n\t\tqueryReviewListAsync(isbn).then(r => {\n\t\t\tlet itemList = [];\n\t\t\tr.forEach((doc) => {\n\t\t\t\tconst data = doc.data();\n\t\t\t\titemList.push(\n\t\t\t\t\t<Review review={data}/>\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetReviewList(itemList);\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t\treviewList ?\n\t\t\t\t(reviewList.length === 0) ?\n\t\t\t\t\t<Typography style={{textAlign:'center'}} id=\"modal-modal-description\" sx={{ mt: 2 }}>작성된 리뷰가 없습니다. </Typography>:\n\t\t\t\t\t<List>{reviewList}</List> :\n\t\t\t\t\t\t<CircularProgress/>\n\t);\n}\n\nexport default ReviewList;","import {\n\tButton,\n\tCircularProgress,\n\tContainer,\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tDialogTitle, Divider\n} from \"@mui/material\";\nimport {useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbDB, fbStorage} from \"../firebase/features\";\nimport './Book.css';\nimport {doc, getDoc} from \"firebase/firestore\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport AvatarList from \"./AvatarList\";\nimport ReviewList from \"./ReviewList\";\n\nconst dialogStyle = {\n\tdisplay: 'flex',\n    justifyContent: 'center',\n\tflexDirection: 'row',\n\tflexWrap: 'wrap'\n}\n\nconst queryBookDetails = async (isbn) => {\n\tconst q = doc(fbDB, 'Books', isbn);\n\treturn await getDoc(q);\n}\n\nconst LoadBookDetails = (isbn, setBookDetails, setImageBigUrl) => {\n\tconsole.log('LoadBookDetails ====> ', isbn);\n\tqueryBookDetails(isbn).then(r => {\n\t\tconst bookDetails = r.data();\n\t\tconsole.log('LoadBookDetails Success !!!! ====> ', r.data());\n\t\tif (bookDetails.imageLinkBig) {\n\t\t\tconsole.log('LoadBookDetails imageLinkBig==>', bookDetails.imageLinkBig);\n\t\t\tsetImageBigUrl(bookDetails.imageLinkBig);\n\t\t}\n\t\tsetBookDetails(r.data());\n\n\t}).catch(e => {\n\t\tconsole.log('LoadBookDetails Error !!!! ====> ', e);\n\t\tsetBookDetails({});\n\t});\n}\n\nconst Book = ({book}) => {\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [imageBigUrl, setImageBigUrl] = useState(null);\n\tconst [open, setOpen] = useState(false);\n\tconst [bookDetails, setBookDetails] = useState(null);\n\tconsole.log('Book===>', imageUrl);\n\n\tlet bookThumbnailUrl = book[11];\n\tif (imageUrl)\n\t\tbookThumbnailUrl = imageUrl;\n\n\tconst handleClickOpen = () => {\n\t\tsetOpen(true);\n\t\t// if (!bookDetails)\n\t\t\tLoadBookDetails(book[12], setBookDetails, setImageBigUrl);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t};\n\n\tconst handleGoto = () => {\n\t\tsetOpen(false);\n\t\twindow.open(book[10]);\n\t};\n\n\tconst handleOnImageError = (e) => {\n\t\tconsole.log('handleOnImageError === ', e.target.src, imageUrl, e);\n\t\tif (e.target.src && imageUrl && e.target.src !== imageUrl)\n\t\t\te.target.src = imageUrl;\n\t}\n\n\tuseEffect(() => {\n\t\tif (bookThumbnailUrl.startsWith(\"gs://\")) {\n\t\t\tlet storageRef = ref(fbStorage, bookThumbnailUrl);\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('BookThumbnail download_url=', value);\n\t\t\t\tsetImageUrl(value)\n\t\t\t});\n\t\t} else {\n\t\t\tsetImageUrl(bookThumbnailUrl);\n\t\t}\n\t}, []);\n\n\tconst readDate = +book[14];\n\tconst date = new Date(readDate);\n\tconsole.log('read date=', date);\n\tconst dateStr = `${date.getFullYear()}년 ${date.getMonth()+1}월 ${date.getDate()}일`;\n\n\treturn (\n\t\t<div>\n\t\t\t<Container\n\t\t\t\tsx={{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\theight: 150,\n\t\t\t\t\talignItems: 'center'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\timageUrl && imageUrl.startsWith(\"http\") ?\n\t\t\t\t\t\t<img onClick={handleClickOpen} className='bookImg' src={imageUrl} alt={book[2]}/> :\n\t\t\t\t\t\t<div onClick={handleClickOpen} className=\"image\">\n\t\t\t\t\t\t\t<img className='bookImg' src=\"\" alt=\"\"/>\n\t\t\t\t\t\t\t\t<div className=\"text\">\n\t\t\t\t\t\t\t\t\t<h6>{book[2]}</h6>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</Container>\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonClose={handleClose}\n\t\t\t\taria-labelledby=\"customized-dialog-title\"\n\t\t\t\taria-describedby=\"modal-modal-description\"\n\t\t\t\tscroll={'paper'}\n\t\t\t>\n\t\t\t\t<DialogContent id=\"modal-modal-description\" sx={{ mt: 2 }}>\n\t\t\t\t\t<DialogTitle id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n\t\t\t\t\t\t{book[2]}\n\t\t\t\t\t</DialogTitle>\n\n\t\t\t\t\t<Box sx={dialogStyle}>\n\t\t\t\t\t\t<img className='bookImgLarge' src={imageBigUrl? imageBigUrl: imageUrl? imageUrl: \"\"} alt={book[2]}\n\t\t\t\t\t\t     onError={handleOnImageError}/>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n\t\t\t\t\t\t<span style={{color: 'red'}}>{dateStr}</span>에 읽었습니다.\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{\n\t\t\t\t\t\t(bookDetails !== null) ?\n\t\t\t\t\t\t\tbookDetails.read ?\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n\t\t\t\t\t\t\t\t\t\t천권읽기 회원 총 <span style={{color: 'red'}}>{bookDetails.read}</span> 명이 읽었습니다.\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t\t\t\t\t<AvatarList style={{\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\t\t\tflexWrap: 'wrap'\n\t\t\t\t\t\t\t\t\t\t}} users={bookDetails.readPeople}/>\n\t\t\t\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t\t\t</div>: <div/> : <CircularProgress />\n\n\t\t\t\t\t}\n\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t<Typography id=\"modal-modal-description\" sx={{ mt: 3 }}>\n\t\t\t\t\t\t\t{book[7]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</DialogContentText>\n\n\t\t\t\t\t<Divider sx={{mt:2}}/>\n\t\t\t\t\t<ReviewList isbn={book[12]}/>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t{\n\t\t\t\t\t\tbook[10] ?\n\t\t\t\t\t\t\t<Button onClick={handleGoto}>이 책에 대한 자세한 내용 보러가기</Button> :\n\t\t\t\t\t\t\t<div/>\n\t\t\t\t\t}\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t)\n}\n\nexport default Book;","import {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {SCREEN_MODE_BOOK_SHELF} from \"../const\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\nimport Book from \"./Book\";\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport UserAvatar from \"./UserAvatar\";\n\n\nconst BookShelf = () => {\n\tconst {state} = useContext(MyContext);\n\tconst [contents, setContents] = useState([]);\n\tconsole.log('BookShelf state=>', state);\n\tconst mode = state.mode;\n\tconst user = state.selectedUser;\n\n\tuseEffect(()=> {\n\t\tif (user) {\n\t\t\tconsole.log('BookShelf download db...', user);\n\t\t\tsetContents([]);\n\t\t\tlet storageRef = ref(fbStorage, `/databases/${user.email}.db`)\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('download_url=', value)\n\t\t\t\twindow.initSqlJs({\n\t\t\t\t\tlocateFile: filename => `/dist/${filename}`\n\t\t\t\t}).then(SQL => {\n\t\t\t\t\tconsole.log(\"SQL\", SQL);\n\t\t\t\t\tconst url = value;\n\t\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\t\txhr.responseType = 'arraybuffer';\n\t\t\t\t\txhr.onload = function(event) {\n\t\t\t\t\t\tconst blob = xhr.response;\n\t\t\t\t\t\t// console.log(\"downloaded blob=\", typeof(blob), blob);\n\t\t\t\t\t\tconst uInt8Array = new Uint8Array(blob);\n\t\t\t\t\t\tconst db = new SQL.Database(uInt8Array);\n\t\t\t\t\t\tconst contents = db.exec(\"SELECT * FROM tbl_favorite\");\n\t\t\t\t\t\t// console.log(\"contents ==>\", contents[0].values);\n\t\t\t\t\t\tsetContents(contents[0].values);\n\t\t\t\t\t};\n\t\t\t\t\txhr.open('GET', url);\n\t\t\t\t\txhr.send();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [user]);\n\n\tif (mode !== SCREEN_MODE_BOOK_SHELF) {\n\t\treturn (\n\t\t\t<div className=\"hidden\"/>\n\t\t)\n\t}\n\n\tconsole.log('BookShelf render() ===>', mode)\n\n\tconst books = contents.slice(0, 100);\n\n\treturn (\n\t\t<>\n\t\t\t<Box marginTop='5rem' padding='1rem' sx={{\n\t\t\t\twidth: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\tflexDirection: 'row',\n\t\t\t\tflexWrap: 'wrap'\n\t\t\t}}>\n\t\t\t\t<UserAvatar user={user} /> <span style={{ marginLeft: '10px', padding: '5px'}}>{user.profileName}</span>\n\t\t\t</Box>\n\t\t\t<Box\n\t\t\t\tsx={{\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\tflexWrap: 'wrap'\n\t\t\t\t}}>\n\t\t\t\t{books.map((book, index) => <Book key={\"\" + index} book={book}/>)}\n\t\t\t</Box>\n\t\t</>\n\t)\n}\n\nexport default BookShelf;","import Box from \"@mui/material/Box\";\nimport {useContext} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {SCREEN_MODE_INIT} from \"../const\";\n\nconst Home = () => {\n\tconst {state} = useContext(MyContext);\n\tconst mode = state.mode;\n\tconsole.log(\"Home render() ======> \", mode);\n\n\tif (mode !== SCREEN_MODE_INIT) {\n\t\treturn (<div />);\n\t}\n\n\treturn (\n\t\t<Box marginTop='5em' sx={{\n\t\t\twidth: '100%',\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center',\n\t\t\tflexDirection: 'row',\n\t\t\tflexWrap: 'wrap'\n\t\t}}>\n\t\t\t<h3> 홈 화면입니다....</h3>\n\t\t</Box>\n\t)\n}\n\nexport default Home;","import {fbAuth} from \"./firebase/features\";\nimport {useEffect, useReducer, useState} from \"react\";\nimport {ACTION_CHANGE_MODE, SCREEN_MODE_INIT, SCREEN_MODE_SIGN_IN} from \"./const\";\nimport Signin from \"./components/Signin\";\nimport UserList from \"./components/UserList\";\nimport stateReducer, {initValues, MyContext} from \"./hooks/reducer\";\nimport ResponsiveAppBar from \"./components/ResponsiveAppBar\";\nimport BookShelf from \"./components/BookShelf\";\nimport Home from \"./components/Home\";\n\n\nconst useFirebaseAuthentication = () => {\n    const [authUser, setAuthUser] = useState(null);\n\n    useEffect(() =>{\n        const unlisten = fbAuth.onAuthStateChanged(\n            authUser => {\n                console.log(\"authUser=>\", authUser);\n\n                authUser\n                    ? setAuthUser(authUser)\n                    : setAuthUser(null);\n            },\n        );\n        return () => {\n            unlisten();\n        }\n    }, []);\n\n    return authUser\n}\n\nconst logout = (dispatch) => {\n    fbAuth.signOut().then((result)=> {\n        console.log(\"signed out~!!\");\n        dispatch({\n            type: ACTION_CHANGE_MODE,\n            mode: SCREEN_MODE_SIGN_IN\n        });\n    }).catch((error)=> {\n        console.log(\"signed out failed~!!!\", error)\n    });\n}\n\n\nfunction App(props) {\n    const [state, dispatch] = useReducer(stateReducer, initValues, undefined);\n    console.log(\"App state=>\", state);\n    const authUser = useFirebaseAuthentication();\n\n    console.log(\"app render()...\", authUser);\n\n    useEffect(()=>{\n        if (authUser === null) {\n            dispatch({type: ACTION_CHANGE_MODE,\n                mode: SCREEN_MODE_SIGN_IN});\n        } else {\n            dispatch({type: ACTION_CHANGE_MODE,\n                mode: SCREEN_MODE_INIT});\n        }\n    }, [authUser]);\n\n    return (\n        <MyContext.Provider value={{state, dispatch, logout}}>\n            <div>\n                <ResponsiveAppBar props={props} user={authUser} />\n                <Signin />\n                <Home />\n                <UserList />\n                <BookShelf />\n            </div>\n        </MyContext.Provider>\n    );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
(this.webpackJsonpread1000=this.webpackJsonpread1000||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(6),a=n.n(c),o=n(41),r=n.n(o),s=(n(50),n(12)),i=(n(51),n(42)),l=n(45),d=n(18),u=n(25),j=n(31),b=Object(i.a)({apiKey:"AIzaSyCGerFrxYZ2_MfRCURUdsqMuD2-9V-B7g4",authDomain:"readbooks-164200.firebaseapp.com",databaseURL:"https://readbooks-164200.firebaseio.com",projectId:"readbooks-164200",storageBucket:"readbooks-164200.appspot.com",messagingSenderId:"451518411017",appId:"1:451518411017:web:cced9b89a6030da16963d8",measurementId:"G-8WQD7EGSVQ"}),g=(Object(l.a)(b),Object(d.c)(b)),O=Object(u.b)(b),h=Object(j.b)(b),m=new u.a,f="sign-in",v="user-rank-daily",k="user-rank-weekly",x="user-rank-monthly",p="good-writer",y="famous-book",I="recent-review",w="best-reader",_="change-mode",L="user-rank-data-received",R=a.a.createContext({}),S={mode:"init",userRankList:null},M=function(e,t){var n;switch(console.log("reducer called~!",e,t),t.type){case _:n=Object.assign({},e,{mode:t.mode});break;case L:n=Object.assign({},e,{userRankList:t.userRankList});break;default:n=S}return console.log("reducer return ===>",n),n},D=n(34),C=n(10),F=function(){var e=Object(c.useContext)(R),t=e.state,n=e.dispatch;console.log("Signin state=>",t);var a=t.mode;return console.log("signin render()",a),a!==f?(console.log("signin hidden return"),Object(C.jsx)("div",{className:"hidden"})):(console.log("signin general return"),Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Sign in screen"}),Object(C.jsx)(D.a,{onClick:function(){!function(e){Object(u.c)(O,m).then((function(t){var n=u.a.credentialFromResult(t).accessToken,c=t.user;console.log("\ub85c\uadf8\uc778 \uc644\ub8cc~!!",c,n),e({type:_,mode:v})})).catch((function(e){var t=e.code,n=e.message,c=e.email,a=u.a.credentialFromError(e);console.log("error=>",t,n,c,a),console.log("\ub85c\uadf8\uc778 \uc2e4\ud328~!!")}))}(n)},children:"Google \ub85c \ub85c\uadf8\uc778"})]}))},N=n(0),U=n.n(N),B=n(1),K=function(e){var t=e.userItem,n=e.screenMode,a=Object(c.useState)(null),o=Object(s.a)(a,2),r=o[0],i=o[1],l=r;console.log("UserItem =>",t,n);var d=t.email?"".concat(t.email,"_").concat(t.profileId):"",u=JSON.parse(window.localStorage.getItem(d));if(u&&console.log("############ url cached",d),Object(c.useEffect)((function(){if(t.email&&null===u){var e=Object(j.c)(h,"/profile_thumbnails/".concat(d,".png"));Object(j.a)(e).then((function(e){console.log("download_url=",e),l=e,window.localStorage.setItem(d,JSON.stringify(e)),i(e)}))}}),[t]),t.imageLinkBig?l=t.imageLinkBig:t.imageLink?l=t.imageLink:d&&u&&(l=u),console.log("UserItem render =>",l),l){var b=n===y?"BookImage":"UserImage";return Object(C.jsxs)("div",{children:[Object(C.jsx)("h6",{children:t.email?"".concat(t.email):"".concat(t.title)}),t.like?"".concat(t.like," \uc88b\uc544\uc694"):"".concat(t.read,"\uad8c \uc77d\uc74c"),Object(C.jsx)("br",{}),Object(C.jsx)("img",{src:l,className:b,alt:""})]})}return Object(C.jsx)("div",{})},E=function(e){var t=e.reviewItem;return console.log("ReviewItem =>",t),Object(C.jsx)("div",{className:"ReviewItem",children:Object(C.jsx)("h6",{children:t.bodyMessage})})},Y=function(e){var t=new Date(e.getFullYear(),0,1),n=Math.floor((e-t)/864e5);return Math.ceil((e.getDay()+1+n)/7)},J=function(){var e=Object(B.a)(U.a.mark((function e(t){var n,c,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,c="",a=null,t===v?c="UserRank/Rank_Day_".concat(n.getFullYear(),"_").concat(n.getMonth()+1,"_").concat(n.getDate(),"/Rank_Day_").concat(n.getFullYear(),"_").concat(n.getMonth()+1,"_").concat(n.getDate()):t===k?c="UserRank/Rank_Week_".concat(n.getFullYear(),"_").concat(Y(n),"/Rank_Week_").concat(n.getFullYear(),"_").concat(Y(n)):t===x?c="UserRank/Rank_Month_".concat(n.getFullYear(),"_").concat(n.getMonth()+1,"/Rank_Month_").concat(n.getFullYear(),"_").concat(n.getMonth()+1):t===w?c="ClientInfoDataBase":t===p?(c="ClientInfoDataBase",a=Object(d.f)(Object(d.a)(g,c),Object(d.g)("like",">",0),Object(d.e)("like","desc"),Object(d.d)(20))):t===y?c="Books":t===I&&(c="MessageDataBase",a=Object(d.f)(Object(d.a)(g,c),Object(d.e)("updatedDate","desc"),Object(d.d)(20))),console.log("query path = ",c),null===a&&(a=Object(d.f)(Object(d.a)(g,c),Object(d.g)("read",">",0),Object(d.e)("read","desc"),Object(d.d)(20))),e.next=8,Object(d.b)(a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.useContext)(R),t=e.state,n=e.dispatch;console.log("UserList state=>",t);var a=t.mode,o=JSON.parse(window.localStorage.getItem(a));if(console.log("################ UserList render() userList=>",a,o),a!==v&&a!==x&&a!==k&&a!==w&&a!==p&&a!==y&&a!==I)return Object(C.jsx)("div",{className:"hidden"});if(!o)return console.log("try to download..."),function(e,t){J(e).then((function(n){var c=[];n.forEach((function(e){var t=e.data();c.push(t)})),window.localStorage.setItem(e,JSON.stringify(c)),t({type:L,userRankList:c})}))}(a,n),Object(C.jsx)("div",{children:Object(C.jsx)("h1",{children:"\ub370\uc774\ud0c0 \ub85c\ub529\uc911..."})});for(var r=[],s=0;s<o.length;){var i=o[s];if(a===I){var l=Object(C.jsx)(E,{reviewItem:i},""+s);r.push(l)}else{var d=Object(C.jsx)(K,{userItem:i,screenMode:a},""+s);r.push(d)}s+=1}return console.log("userItems=",r),Object(C.jsx)("div",{children:Object(C.jsx)("ul",{children:r})})},G=n(60),P=function(){var e=Object(c.useContext)(R),t=e.state,n=e.dispatch,a=t.mode;return console.log("currentMode=",a,typeof a),Object(C.jsx)("div",{className:"MyNav",children:Object(C.jsxs)(G.a,{className:"justify-content-center",variant:"pills",activeKey:a,onSelect:function(e){console.log("selected key=>",e),n({type:_,mode:e})},children:[Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"good-writer",children:"\uc88b\uc740 \uae00\uc744 \uc4f0\ub294 \uce5c\uad6c\ub4e4"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"famous-book",children:"\uc5b4\ub9b0\uc774 \uc778\uae30 \ub3c4\uc11c"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"recent-review",children:"\ucd5c\uadfc \ub9ac\ubdf0"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"user-rank-daily",children:"\uc624\ub298\uc758 \ub3c5\uc11c\uc655"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"user-rank-weekly",children:"\uc8fc\uac04 \ub3c5\uc11c\uc655"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"user-rank-monthly",children:"\uc6d4\uac04 \ub3c5\uc11c\uc655"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"best-reader",children:"\ucc45\uc744 \ub9ce\uc774 \uc77d\uc740 \uce5c\uad6c\ub4e4"})}),Object(C.jsx)(G.a.Item,{children:Object(C.jsx)(G.a.Link,{eventKey:"find-user",children:"\uce5c\uad6c \ucc3e\uae30"})})]})})};var T=function(){var e=Object(c.useReducer)(M,S,void 0),t=Object(s.a)(e,2),n=t[0],a=t[1];console.log("App state=>",n);var o=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=O.onAuthStateChanged((function(e){console.log("authUser=>",e),a(e||null)}));return function(){e()}}),[]),n}();return console.log("app render()...",o),Object(c.useEffect)((function(){a(null===o?{type:_,mode:f}:{type:_,mode:v})}),[o]),Object(C.jsx)(R.Provider,{value:{state:n,dispatch:a},children:Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(P,{}),Object(C.jsx)("hr",{style:{backgroundColor:"#0D60EA",height:1}}),Object(C.jsx)(F,{}),Object(C.jsx)(A,{}),Object(C.jsx)(D.a,{className:"hidden",onClick:function(){!function(e){O.signOut().then((function(t){console.log("signed out~!!"),e({type:_,mode:f})})).catch((function(e){console.log("signed out failed~!!!",e)}))}(a)},children:"\ub85c\uadf8\uc544\uc6c3"})]})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))};n(57);r.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(T,{})}),document.getElementById("root")),W()}},[[58,1,2]]]);
//# sourceMappingURL=main.f9dd8e77.chunk.js.map
{"version":3,"sources":["firebase/features.js","const.js","hooks/reducer.js","components/Signin.js","components/ReviewItem.js","components/UserCard.js","components/UserList.js","components/ResponsiveAppBar.js","components/Book.js","components/BookShelf.js","App.js","reportWebVitals.js","index.js"],"names":["firebaseApp","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","fbDB","getAnalytics","getFirestore","fbAuth","getAuth","fbStorage","getStorage","googleAuthProvider","GoogleAuthProvider","SCREEN_MODE_SIGN_IN","SCREEN_MODE_USER_RANK_DAILY","SCREEN_MODE_USER_RANK_WEEKLY","SCREEN_MODE_USER_RANK_MONTHLY","SCREEN_MODE_GOOD_WRITER","SCREEN_MODE_FAMOUS_BOOK","SCREEN_MODE_RECENT_REVIEW","SCREEN_MODE_BEST_READER","SCREEN_MODE_BOOK_SHELF","ACTION_CHANGE_MODE","ACTION_USER_RANK_DATA_RECEIVED","ACTION_USER_SELECTED","MyContext","React","createContext","initValues","mode","userRankList","selectedUser","stateReducer","state","action","newState","console","log","type","Object","assign","user","Signin","useContext","dispatch","className","Container","sx","display","justifyContent","alignItems","marginTop","Button","onClick","signInWithPopup","then","result","token","credentialFromResult","accessToken","catch","error","errorCode","code","errorMessage","message","email","credential","credentialFromError","login","ReviewItem","reviewItem","bodyMessage","queryClientInfo","profileId","a","q","doc","getDoc","UserCard","userItem","screenMode","userUrl","cachedUrl","JSON","parse","window","localStorage","getItem","useState","imageUrl","setImageUrl","clientInfo","setClientInfo","useEffect","storageRef","ref","getDownloadURL","value","setItem","stringify","data","readNum","read","like","Card","width","minWidth","maxWidth","margin","CardActionArea","handleCardClick","CardMedia","component","alt","height","image","CardContent","Typography","gutterBottom","variant","profileName","color","onlineMessage","age","goal","review","CardActions","size","getWeekOfYear","currentDate","oneJan","Date","getFullYear","numberOfDays","Math","floor","getDay","queryCallAsync","date","path","getMonth","getDate","query","collection","where","orderBy","limit","getDocs","UserList","userList","r","itemList","forEach","push","LoadData","userItems","i","length","_data","item","Box","flexDirection","flexWrap","pages","settings","HideOnScroll","props","children","trigger","useScrollTrigger","target","undefined","Slide","appear","direction","in","ResponsiveAppBar","logout","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","filter","page","getDefaultTitle","title","setTitle","downloadUrl","photoURL","handleCloseNavMenu","innerText","dataset","index","parentElement","AppBar","Toolbar","disableGutters","noWrap","mr","xs","md","flexGrow","IconButton","event","currentTarget","Menu","id","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","map","MenuItem","textAlign","my","Tooltip","p","Avatar","src","mt","setting","dialogStyle","queryBookDetails","isbn","Book","book","imageBigUrl","setImageBigUrl","setOpen","bookDetails","setBookDetails","bookThumbnailUrl","handleClickOpen","imageLinkBig","e","LoadBookDetails","startsWith","readDate","dateStr","Dialog","DialogTitle","DialogContent","DialogContentText","style","CircularProgress","DialogActions","BookShelf","contents","setContents","initSqlJs","locateFile","filename","SQL","url","xhr","XMLHttpRequest","responseType","onload","blob","response","uInt8Array","Uint8Array","Database","exec","values","send","books","content","marginBottom","signOut","App","useReducer","authUser","setAuthUser","unlisten","onAuthStateChanged","useFirebaseAuthentication","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.16b7ad55.chunk.js","sourcesContent":["import {initializeApp} from \"firebase/app\";\nimport {getAnalytics} from \"firebase/analytics\";\nimport {getFirestore} from \"firebase/firestore\";\nimport {getAuth, GoogleAuthProvider} from \"firebase/auth\";\nimport {getStorage} from \"firebase/storage\";\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyCGerFrxYZ2_MfRCURUdsqMuD2-9V-B7g4\",\n\tauthDomain: \"readbooks-164200.firebaseapp.com\",\n\tdatabaseURL: \"https://readbooks-164200.firebaseio.com\",\n\tprojectId: \"readbooks-164200\",\n\tstorageBucket: \"readbooks-164200.appspot.com\",\n\tmessagingSenderId: \"451518411017\",\n\tappId: \"1:451518411017:web:cced9b89a6030da16963d8\",\n\tmeasurementId: \"G-8WQD7EGSVQ\"\n};\n\nexport const firebaseApp = initializeApp(firebaseConfig);\nexport const fbAnalytics = getAnalytics(firebaseApp);\nexport const fbDB = getFirestore(firebaseApp);\nexport const fbAuth = getAuth(firebaseApp);\nexport const fbStorage = getStorage(firebaseApp)\nexport const googleAuthProvider = new GoogleAuthProvider();","\nexport const SCREEN_MODE_INIT = \"init\";\nexport const SCREEN_MODE_SIGN_IN = \"sign-in\";\nexport const SCREEN_MODE_USER_RANK_DAILY = \"user-rank-daily\";\nexport const SCREEN_MODE_USER_RANK_WEEKLY = \"user-rank-weekly\";\nexport const SCREEN_MODE_USER_RANK_MONTHLY = \"user-rank-monthly\";\nexport const SCREEN_MODE_GOOD_WRITER = \"good-writer\";\nexport const SCREEN_MODE_FAMOUS_BOOK = \"famous-book\";\nexport const SCREEN_MODE_RECENT_REVIEW = \"recent-review\";\nexport const SCREEN_MODE_BEST_READER = \"best-reader\";\nexport const SCREEN_MODE_FIND_USER = \"find-user\";\nexport const SCREEN_MODE_BOOK_SHELF = \"book-shelf\";\n\nexport const ACTION_CHANGE_MODE = \"change-mode\";\nexport const ACTION_USER_RANK_DATA_RECEIVED = \"user-rank-data-received\";\nexport const ACTION_USER_SELECTED = \"user-selected\";","import React from 'react';\nimport {\n\tACTION_CHANGE_MODE,\n\tACTION_USER_RANK_DATA_RECEIVED,\n\tACTION_USER_SELECTED,\n\tSCREEN_MODE_BOOK_SHELF,\n\tSCREEN_MODE_INIT\n} from \"../const\";\n\nexport const MyContext = React.createContext({});\n\nexport const initValues = {\n\tmode: SCREEN_MODE_INIT,\n\tuserRankList: null,\n\tselectedUser: null\n}\n\nexport const stateReducer = (state, action) => {\n\tconsole.log(\"reducer called~!\", state, action);\n\tlet newState;\n\tswitch (action.type) {\n\t\tcase ACTION_CHANGE_MODE: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tmode: action.mode\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_USER_RANK_DATA_RECEIVED: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tuserRankList: action.userRankList\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_USER_SELECTED: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tselectedUser: action.user,\n\t\t\t\tmode: SCREEN_MODE_BOOK_SHELF\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tnewState = initValues;\n\t}\n\tconsole.log(\"reducer return ===>\", newState);\n\treturn newState;\n}\n\nexport default stateReducer;","import {ACTION_CHANGE_MODE, SCREEN_MODE_SIGN_IN, SCREEN_MODE_USER_RANK_DAILY} from \"../const\";\nimport {fbAuth, googleAuthProvider} from \"../firebase/features\";\nimport {GoogleAuthProvider, signInWithPopup} from \"firebase/auth\";\nimport {useContext} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {Button, Container} from \"@mui/material\";\n\n\nconst login = (dispatch) => {\n\tsignInWithPopup(fbAuth, googleAuthProvider)\n\t\t.then((result) => {\n\t\t\t// This gives you a Google Access Token. You can use it to access the Google API.\n\t\t\tconst credential = GoogleAuthProvider.credentialFromResult(result);\n\t\t\tconst token = credential.accessToken;\n\t\t\t// The signed-in user info.\n\t\t\tconst user = result.user;\n\t\t\t// ...\n\t\t\tconsole.log(\"로그인 완료~!!\", user, token);\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: SCREEN_MODE_USER_RANK_DAILY})\n\t\t}).catch((error) => {\n\t\t// Handle Errors here.\n\t\tconst errorCode = error.code;\n\t\tconst errorMessage = error.message;\n\t\t// The email of the user's account used.\n\t\tconst email = error.email;\n\t\t// The AuthCredential type that was used.\n\t\tconst credential = GoogleAuthProvider.credentialFromError(error);\n\t\tconsole.log('error=>', errorCode, errorMessage, email, credential);\n\t\tconsole.log(\"로그인 실패~!!\");\n\t});\n}\n\n\nconst Signin = () => {\n\tconst {state, dispatch} = useContext(MyContext);\n\tconsole.log('Signin state=>', state);\n\n\tconst mode = state.mode;\n\n\tconsole.log('signin render()', mode)\n\tif (mode !== SCREEN_MODE_SIGN_IN) {\n\t\tconsole.log(\"signin hidden return\")\n\t\treturn (\n\t\t\t<div className=\"hidden\"/>\n\t\t)\n\t}\n\tconsole.log(\"signin general return\")\n\treturn (\n\t\t<Container sx={{\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tmarginTop: 20\n\t\t}}>\n\t\t\t<Button onClick={\n\t\t\t\t()=> {\n\t\t\t\t\tlogin(dispatch);\n\t\t\t\t}\n\t\t\t}>Google 로 로그인</Button>\n\t\t</Container>\n\t)\n}\n\nexport default Signin;","\nconst ReviewItem = ({reviewItem}) => {\n\tconsole.log(\"ReviewItem =>\", reviewItem);\n\treturn (\n\t\t<div className=\"ReviewItem\">\n\t\t\t<h6>{reviewItem.bodyMessage}</h6>\n\t\t</div>\n\t);\n\n}\n\nexport default ReviewItem;","import {Button, Card, CardActionArea, CardActions, CardContent, CardMedia} from \"@mui/material\";\nimport Typography from \"@mui/material/Typography\";\nimport {useContext, useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbDB, fbStorage} from \"../firebase/features\";\nimport {doc, getDoc} from \"firebase/firestore\";\nimport {\n\tACTION_CHANGE_MODE, ACTION_USER_SELECTED, SCREEN_MODE_BOOK_SHELF,\n\tSCREEN_MODE_GOOD_WRITER,\n\tSCREEN_MODE_USER_RANK_DAILY,\n\tSCREEN_MODE_USER_RANK_MONTHLY,\n\tSCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {MyContext} from \"../hooks/reducer\";\n\n\nconst queryClientInfo = async (email, profileId) => {\n\tconst q = doc(fbDB, 'ClientInfoDataBase', `${email}_${profileId}`);\n\treturn await getDoc(q);\n}\n\nconst handleCardClick = (dispatch, email) => {\n\tconsole.log(email);\n\tdispatch({type: ACTION_USER_SELECTED, user: email});\n}\n\nconst UserCard = ({userItem, screenMode}) => {\n\tconst {dispatch} = useContext(MyContext);\n\tconst userUrl = userItem.email ? `${userItem.email}_${userItem.profileId}`: '';\n\tconst cachedUrl = JSON.parse(window.localStorage.getItem(userUrl));\n\tconst [imageUrl, setImageUrl] = useState(cachedUrl);\n\tconst [clientInfo, setClientInfo] = useState({});\n\n\tconsole.log(\"UserCard render()...\", userItem);\n\n\tuseEffect(() => {\n\t\tif (!imageUrl) {\n\t\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('download_url=', value)\n\t\t\t\twindow.localStorage.setItem(userUrl, JSON.stringify(value));\n\t\t\t\tsetImageUrl(value)\n\t\t\t});\n\t\t} else {\n\t\t\tsetImageUrl(cachedUrl);\n\t\t}\n\t}, [userItem]);\n\n\tuseEffect(()=> {\n\t\tif (userItem) {\n\t\t\tqueryClientInfo(userItem.email, userItem.profileId).then(doc => {\n\t\t\t\tconsole.log(\"clientInfo =>\", doc.data());\n\t\t\t\tsetClientInfo(doc.data());\n\t\t\t});\n\t\t}\n\t}, []);\n\n\tlet readNum = '';\n\n\tif (screenMode === SCREEN_MODE_USER_RANK_DAILY) {\n\t\treadNum = `오늘 총 ${userItem.read}권 읽었습니다.`;\n\t} else if (screenMode === SCREEN_MODE_USER_RANK_WEEKLY) {\n\t\treadNum = `이번 주에 총 ${userItem.read}권 읽었습니다.`;\n\t} else if (screenMode === SCREEN_MODE_USER_RANK_MONTHLY) {\n\t\treadNum = `이번 달에 총 ${userItem.read}권 읽었습니다.`;\n\t} else if (screenMode === SCREEN_MODE_GOOD_WRITER) {\n\t\treadNum = `좋아요: ${userItem.like}`;\n\t}\n\n\treturn (\n\t\t<Card sx={{ width: 280, minWidth: 245, maxWidth: 345, margin: 1}}>\n\t\t\t<CardActionArea\n\t\t\t\tonClick={() => {handleCardClick(dispatch, userItem.email);}}>\n\t\t\t\t<CardMedia\n\t\t\t\t\tcomponent=\"img\"\n\t\t\t\t\talt=\"profile image\"\n\t\t\t\t\theight=\"300em\"\n\t\t\t\t\timage={imageUrl}\n\t\t\t\t/>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography gutterBottom variant=\"h5\" component=\"div\">\n\t\t\t\t\t\t{clientInfo.profileName}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body1\" color=\"text.primary\">\n\t\t\t\t\t\t{clientInfo.onlineMessage}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant=\"body1\" color=\"text.primary\">\n\t\t\t\t\t\t{readNum}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography sx={{marginTop: 1}} variant=\"body2\" color=\"text.secondary\">\n\t\t\t\t\t\t나이: {clientInfo.age} <br/>\n\t\t\t\t\t\t목표: {clientInfo.goal} <br/>\n\t\t\t\t\t\t읽은 책: {clientInfo.read} 권 <br/>\n\t\t\t\t\t\t{clientInfo.review ? `작성한 리뷰: ${clientInfo.review} 개`:`작성한 리뷰: 0 개`} <br/>\n\t\t\t\t\t\t{clientInfo.like ? `좋아요: ${clientInfo.like}`: ``}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\t\t\t</CardActionArea>\n\t\t\t<CardActions>\n\t\t\t\t<Button size=\"small\">Share</Button>\n\t\t\t\t<Button size=\"small\">Learn More</Button>\n\t\t\t</CardActions>\n\t\t</Card>\n\t);\n}\n\nexport default UserCard;","import UserItem from \"./UserItem\";\nimport {\n    ACTION_USER_RANK_DATA_RECEIVED,\n    SCREEN_MODE_BEST_READER,\n    SCREEN_MODE_FAMOUS_BOOK,\n    SCREEN_MODE_GOOD_WRITER,\n    SCREEN_MODE_RECENT_REVIEW,\n    SCREEN_MODE_USER_RANK_DAILY,\n    SCREEN_MODE_USER_RANK_MONTHLY,\n    SCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {collection, getDocs, limit, orderBy, query, where} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport {useContext} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport ReviewItem from \"./ReviewItem\";\nimport UserCard from \"./UserCard\";\nimport {Container} from \"@mui/material\";\nimport Box from \"@mui/material/Box\";\n\n\nconst getWeekOfYear = (currentDate) => {\n    const oneJan = new Date(currentDate.getFullYear(),0,1);\n    const numberOfDays = Math.floor((currentDate - oneJan) / (24 * 60 * 60 * 1000));\n    return Math.floor((currentDate.getDay() + 1 + numberOfDays) / 7);\n}\n\nconst queryCallAsync = async (mode) => {\n    const date = new Date();\n    let path = ``;\n    let q = null;\n\n    if (mode === SCREEN_MODE_USER_RANK_DAILY) {\n        path = `UserRank/Rank_Day_${date.getFullYear()}_${date.getMonth() + 1}_${date.getDate()}/Rank_Day_${date.getFullYear()}_${date.getMonth() + 1}_${date.getDate()}`;\n    } else if (mode === SCREEN_MODE_USER_RANK_WEEKLY) {\n        path = `UserRank/Rank_Week_${date.getFullYear()}_${getWeekOfYear(date)}/Rank_Week_${date.getFullYear()}_${getWeekOfYear(date)}`;\n    } else if (mode === SCREEN_MODE_USER_RANK_MONTHLY) {\n        path = `UserRank/Rank_Month_${date.getFullYear()}_${date.getMonth() + 1}/Rank_Month_${date.getFullYear()}_${date.getMonth() + 1}`;\n    } else if (mode === SCREEN_MODE_BEST_READER) {\n        path = `ClientInfoDataBase`;\n    } else if (mode === SCREEN_MODE_GOOD_WRITER) {\n        path = \"ClientInfoDataBase\";\n        q = query(collection(fbDB, path), where(\"like\", \">\", 0), orderBy(\"like\", \"desc\"), limit(20));\n    } else if (mode === SCREEN_MODE_FAMOUS_BOOK) {\n        path = 'Books';\n    } else if (mode === SCREEN_MODE_RECENT_REVIEW) {\n        path = \"MessageDataBase\";\n        q = query(collection(fbDB, path), orderBy(\"updatedDate\", \"desc\"), limit(20));\n    }\n    console.log(\"query path = \", path);\n    if (q === null)\n        q = query(collection(fbDB, path), where(\"read\", \">\", 0), orderBy(\"read\", \"desc\"), limit(20));\n    return await getDocs(q)\n}\n\nconst LoadData = (mode, dispatch) => {\n\n  queryCallAsync(mode).then(r => {\n    let itemList = [];\n    r.forEach((doc) => {\n      const data = doc.data();\n        itemList.push(data);\n\n    });\n    window.localStorage.setItem(mode, JSON.stringify(itemList));\n    dispatch({type: ACTION_USER_RANK_DATA_RECEIVED, userRankList: itemList});\n  });\n}\n\n\nconst UserList = () => {\n    const {state, dispatch} = useContext(MyContext);\n    console.log('UserList state=>', state);\n    const mode = state.mode;\n\n    const userList = JSON.parse(window.localStorage.getItem(mode));\n    console.log('################ UserList render() userList=>', mode, userList);\n\n    if (mode !== SCREEN_MODE_USER_RANK_DAILY && mode !== SCREEN_MODE_USER_RANK_MONTHLY && mode !== SCREEN_MODE_USER_RANK_WEEKLY\n        && mode !== SCREEN_MODE_BEST_READER && mode !== SCREEN_MODE_GOOD_WRITER && mode !== SCREEN_MODE_FAMOUS_BOOK\n        && mode !== SCREEN_MODE_RECENT_REVIEW) {\n      return (\n          <div className=\"hidden\"/>\n      )\n    }\n\n    if (!userList) {\n        console.log(\"try to download...\")\n        LoadData(mode, dispatch);\n        return (\n            <div>\n                <h1>데이타 로딩중...</h1>\n            </div>\n        )\n    }\n\n    let userItems = [];\n    let i = 0;\n    while (i < userList.length) {\n      const _data = userList[i];\n      if (mode === SCREEN_MODE_RECENT_REVIEW) {\n          const item = <ReviewItem key={\"\" + i} reviewItem={_data}/>\n          userItems.push(item);\n      } else {\n          // const item = <UserItem key={\"\" + i} userItem={_data} screenMode={mode}/>\n          const item = <UserCard key={\"\" + i} userItem={_data} screenMode={mode}/>\n          userItems.push(item);\n      }\n      i = i + 1;\n    }\n\n    console.log('userItems=', userItems);\n    return (\n        <Box marginTop='5em' sx={{\n            width: '100%',\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'row',\n            flexWrap: 'wrap'\n        }}>\n            {userItems}\n        </Box>\n    )\n}\n\nexport default UserList","import * as React from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport Menu from '@mui/material/Menu';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport Container from '@mui/material/Container';\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport Tooltip from '@mui/material/Tooltip';\nimport MenuItem from '@mui/material/MenuItem';\nimport {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {\n\tACTION_CHANGE_MODE,\n\tSCREEN_MODE_BEST_READER,\n\tSCREEN_MODE_FAMOUS_BOOK, SCREEN_MODE_FIND_USER,\n\tSCREEN_MODE_GOOD_WRITER, SCREEN_MODE_RECENT_REVIEW, SCREEN_MODE_SIGN_IN,\n\tSCREEN_MODE_USER_RANK_DAILY, SCREEN_MODE_USER_RANK_MONTHLY,\n\tSCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\nimport {Slide, useScrollTrigger} from \"@mui/material\";\nimport PropTypes from \"prop-types\";\n\nconst pages = [\n\t{\n\t\tmode: SCREEN_MODE_GOOD_WRITER,\n\t\tvalue: '좋은 글을 쓰는 친구들',\n\t},\n\t// {\n\t// \tmode: SCREEN_MODE_FAMOUS_BOOK,\n\t// \tvalue: '인기 도서'\n\t// },\n\t// {\n\t// \tmode: SCREEN_MODE_RECENT_REVIEW,\n\t// \tvalue: '리뷰'\n\t// },\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_DAILY,\n\t\tvalue: '오늘의 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_WEEKLY,\n\t\tvalue: '주간 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_MONTHLY,\n\t\tvalue: '월간 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_BEST_READER,\n\t\tvalue: '베스트 리더'\n\t},\n\t// {\n\t// \tmode: SCREEN_MODE_FIND_USER,\n\t// \tvalue: '친구 찾기'\n\t// }\n];\n\nconst settings = ['Profile', 'Account', 'Dashboard', 'Logout'];\n\nconst HideOnScroll = (props) => {\n\tconst { children, window } = props;\n\t// Note that you normally won't need to set the window ref as useScrollTrigger\n\t// will default to window.\n\t// This is only being set here because the demo is in an iframe.\n\tconst trigger = useScrollTrigger({\n\t\ttarget: window ? window() : undefined,\n\t});\n\n\treturn (\n\t\t<Slide appear={false} direction=\"down\" in={!trigger}>\n\t\t\t{children}\n\t\t</Slide>\n\t);\n}\n\nHideOnScroll.propTypes = {\n\tchildren: PropTypes.element.isRequired,\n\t/**\n\t * Injected by the documentation to work in an iframe.\n\t * You won't need it on your project.\n\t */\n\twindow: PropTypes.func,\n};\n\nconst getDefaultTitle = (mode) => {\n\n\tconst result = pages.filter(page => mode === page.mode);\n\tif (result.length > 0) {\n\t\tconsole.log(\"getDefaultTitle=>\", result);\n\t\treturn result[0].value;\n\t} else {\n\t\treturn '천권읽기';\n\t}\n}\n\nconst ResponsiveAppBar = (props) => {\n\tconst {state, dispatch, logout} = useContext(MyContext);\n\tconst user = props.user;\n\tconst [anchorElNav, setAnchorElNav] = useState(null);\n\tconst [anchorElUser, setAnchorElUser] = useState(null);\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [title, setTitle] = useState(getDefaultTitle(SCREEN_MODE_USER_RANK_DAILY));\n\n\tconsole.log(\"ResponsiveAppBar title=>\", title, state.mode);\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\tconst userUrl = `${user.email}`;\n\t\t\tconst downloadUrl = user.photoURL; //JSON.parse(window.localStorage.getItem(userUrl));\n\t\t\tconsole.log(\"ResponsiveAppBar downloadUrl=>\", downloadUrl);\n\n\t\t\tif (!downloadUrl) {\n\t\t\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\t\tconsole.log('Me download_url=', value)\n\t\t\t\t\twindow.localStorage.setItem(userUrl, JSON.stringify(value));\n\t\t\t\t\tsetImageUrl(value)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetImageUrl(downloadUrl);\n\t\t\t}\n\t\t}\n\t}, [user]);\n\n\n\n\tconst handleOpenNavMenu = (event) => {\n\t\tconsole.log(\"handleOpenNavMenu=>\", event.currentTarget);\n\t\tsetAnchorElNav(event.currentTarget);\n\t};\n\tconst handleOpenUserMenu = (event) => {\n\t\tconsole.log(\"handleOpenUserMenu=>\", event.currentTarget);\n\t\tsetAnchorElUser(event.currentTarget);\n\t};\n\n\tconst handleCloseNavMenu = (item) => {\n\t\tconsole.log(\"handleCloseNavMenu\", item);\n\t\tsetAnchorElNav(null);\n\t\tif (item.target.innerText === 'Logout') {\n\t\t\tconsole.log('Logout~!!!')\n\t\t\tsetAnchorElUser(null);\n\t\t\tsetImageUrl('');\n\t\t\tlogout(dispatch);\n\t\t\treturn;\n\t\t}\n\t\tif (item.target.dataset.index) {\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: item.target.dataset.index});\n\t\t} else if(item.target.parentElement.dataset.index) {\n\t\t\tsetTitle(item.target.innerText);\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: item.target.parentElement.dataset.index});\n\t\t}\n\t};\n\n\tconst handleCloseUserMenu = () => {\n\t\tsetAnchorElUser(null);\n\t};\n\n\tlet _className='';\n\tif (state.mode === SCREEN_MODE_SIGN_IN) {\n\t\t_className = \"hidden\";\n\t}\n\treturn (\n\t\t<HideOnScroll {...props}>\n\t\t<AppBar>\n\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t<Toolbar disableGutters>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tsx={{ mr: 2, display: { xs: 'none', md: 'flex' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\t천권읽기\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Box sx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={handleOpenNavMenu}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\tanchorEl={anchorElNav}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\topen={Boolean(anchorElNav)}\n\t\t\t\t\t\t\tonClose={handleCloseNavMenu}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tdisplay: { xs: 'block', md: 'none' },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t\t\t<MenuItem key={page.mode}\n\t\t\t\t\t\t\t\t          data-index={page.mode} onClick={handleCloseNavMenu}>\n\t\t\t\t\t\t\t\t\t<Typography textAlign=\"center\">{page.value}</Typography>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tsx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' } }}>\n\t\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tkey={page.mode}\n\t\t\t\t\t\t\t\tdata-index={page.mode}\n\t\t\t\t\t\t\t\tonClick={handleCloseNavMenu}\n\t\t\t\t\t\t\t\tsx={{ my: 2, color: 'white', display: 'block' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page.value}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box sx={{ flexGrow: 0 }}>\n\t\t\t\t\t\t<Tooltip title=\"Open settings\">\n\t\t\t\t\t\t\t<IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n\t\t\t\t\t\t\t\t<Avatar alt=\"Remy Sharp\" src={imageUrl} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tsx={{ mt: '45px' }}\n\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\tanchorEl={anchorElUser}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\topen={Boolean(anchorElUser)}\n\t\t\t\t\t\t\tonClose={handleCloseUserMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{settings.map((setting) => (\n\t\t\t\t\t\t\t\t<MenuItem key={setting} onClick={handleCloseNavMenu}>\n\t\t\t\t\t\t\t\t\t<Typography textAlign=\"center\">{setting}</Typography>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Box>\n\t\t\t\t</Toolbar>\n\t\t\t</Container>\n\t\t</AppBar>\n\t\t</HideOnScroll>\n\t);\n};\n\nexport default ResponsiveAppBar;\n","import {\n\tButton,\n\tCircularProgress,\n\tContainer,\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tDialogTitle\n} from \"@mui/material\";\nimport {useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbDB, fbStorage} from \"../firebase/features\";\nimport './Book.css';\nimport {collection, doc, getDoc, getDocs, limit, orderBy, query, where} from \"firebase/firestore\";\n\nconst dialogStyle = {\n\tdisplay: 'flex',\n    justifyContent: 'center',\n\tflexDirection: 'row',\n\tflexWrap: 'wrap'\n}\n\nconst queryBookDetails = async (isbn) => {\n\tconst q = doc(fbDB, 'Books', isbn);\n\treturn await getDoc(q);\n}\n\nconst LoadBookDetails = (isbn, setBookDetails, setImageBigUrl) => {\n\tconsole.log('LoadBookDetails ====> ', isbn);\n\tqueryBookDetails(isbn).then(r => {\n\t\tconst bookDetails = r.data();\n\t\tconsole.log('LoadBookDetails Success !!!! ====> ', r.data());\n\t\tif (bookDetails.imageLinkBig) {\n\t\t\tconsole.log('LoadBookDetails imageLinkBig==>', bookDetails.imageLinkBig);\n\t\t\tsetImageBigUrl(bookDetails.imageLinkBig);\n\t\t}\n\t\tsetBookDetails(r.data());\n\n\t}).catch(e => {\n\t\tconsole.log('LoadBookDetails Error !!!! ====> ', e);\n\t\tsetBookDetails({});\n\t});\n}\n\nconst Book = ({book}) => {\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [imageBigUrl, setImageBigUrl] = useState(null);\n\tconst [open, setOpen] = useState(false);\n\tconst [bookDetails, setBookDetails] = useState(null);\n\tconsole.log('Book===>', imageUrl);\n\n\tlet bookThumbnailUrl = book[11];\n\tif (imageUrl)\n\t\tbookThumbnailUrl = imageUrl;\n\n\tconst handleClickOpen = () => {\n\t\tsetOpen(true);\n\t\t// if (!bookDetails)\n\t\t\tLoadBookDetails(book[12], setBookDetails, setImageBigUrl);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t};\n\n\tconst handleGoto = () => {\n\t\tsetOpen(false);\n\t\twindow.open(book[10]);\n\t};\n\n\tuseEffect(() => {\n\t\tif (bookThumbnailUrl.startsWith(\"gs://\")) {\n\t\t\tlet storageRef = ref(fbStorage, bookThumbnailUrl);\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('BookThumbnail download_url=', value);\n\t\t\t\tsetImageUrl(value)\n\t\t\t});\n\t\t} else {\n\t\t\tsetImageUrl(bookThumbnailUrl);\n\t\t}\n\t}, )\n\n\tconst readDate = +book[14];\n\tconst date = new Date(readDate);\n\tconsole.log('read date=', date);\n\tconst dateStr = `${date.getFullYear()}년 ${date.getMonth()+1}월 ${date.getDate()}일`;\n\n\n\treturn (\n\t\t<div>\n\t\t\t<Container\n\t\t\t\tsx={{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\theight: 150,\n\t\t\t\t\talignItems: 'center'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\timageUrl && imageUrl.startsWith(\"http\") ?\n\t\t\t\t\t\t<img onClick={handleClickOpen} className='bookImg' src={imageUrl} alt={book[2]}/> :\n\t\t\t\t\t\t<div onClick={handleClickOpen} className=\"image\">\n\t\t\t\t\t\t\t<img className='bookImg' src=\"\"/>\n\t\t\t\t\t\t\t\t<div className=\"text\">\n\t\t\t\t\t\t\t\t\t<h6>{book[2]}</h6>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</Container>\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonClose={handleClose}\n\t\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\t>\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t{book[2]}\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogContent sx={dialogStyle}>\n\t\t\t\t\t<img className='bookImgLarge' src={imageBigUrl? imageBigUrl: imageUrl? imageUrl: \"\"} alt={book[2]}/>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t<span style={{color: 'red'}}>{dateStr}</span>에 읽었습니다.\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t{/* book details */}\n\t\t\t\t<DialogContent sx={dialogStyle}>\n\t\t\t\t\t{\n\t\t\t\t\t\t(bookDetails !== null) ?\n\t\t\t\t\t\t\tbookDetails.read ?\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t\t\t천권읽기 회원 총 <span style={{color: 'red'}}>{bookDetails.read}</span> 명이 읽었습니다.\n\t\t\t\t\t\t</DialogContentText> : <div/> : <CircularProgress />\n\n\t\t\t\t\t}\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t{book[7]}\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t{\n\t\t\t\t\t\tbook[10] ?\n\t\t\t\t\t\t\t<Button onClick={handleGoto}>이 책에 대한 자세한 내용 보러가기</Button> :\n\t\t\t\t\t\t\t<div/>\n\t\t\t\t\t}\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t)\n}\n\nexport default Book;","import {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {SCREEN_MODE_BOOK_SHELF} from \"../const\";\nimport {Container, ImageList, ImageListItem} from \"@mui/material\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\nimport Book from \"./Book\";\nimport Box from \"@mui/material/Box\";\n\n\nconst BookShelf = () => {\n\tconst {state, dispatch} = useContext(MyContext);\n\tconst [contents, setContents] = useState([]);\n\tconsole.log('BookShelf state=>', state);\n\tconst mode = state.mode;\n\n\tuseEffect(()=> {\n\n\t\tif (state.selectedUser) {\n\t\t\tlet storageRef = ref(fbStorage, `/databases/${state.selectedUser}.db`)\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('download_url=', value)\n\t\t\t\twindow.initSqlJs({\n\t\t\t\t\tlocateFile: filename => `/dist/${filename}`\n\t\t\t\t}).then(SQL => {\n\t\t\t\t\tconsole.log(\"SQL\", SQL);\n\t\t\t\t\tconst url = value;\n\t\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\t\txhr.responseType = 'arraybuffer';\n\t\t\t\t\txhr.onload = function(event) {\n\t\t\t\t\t\tconst blob = xhr.response;\n\t\t\t\t\t\t// console.log(\"downloaded blob=\", typeof(blob), blob);\n\t\t\t\t\t\tconst uInt8Array = new Uint8Array(blob);\n\t\t\t\t\t\tconst db = new SQL.Database(uInt8Array);\n\t\t\t\t\t\tconst contents = db.exec(\"SELECT * FROM tbl_favorite\");\n\t\t\t\t\t\t// console.log(\"contents ==>\", contents[0].values);\n\t\t\t\t\t\tsetContents(contents[0].values);\n\t\t\t\t\t};\n\t\t\t\t\txhr.open('GET', url);\n\t\t\t\t\txhr.send();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [state.selectedUser]);\n\n\tif (mode !== SCREEN_MODE_BOOK_SHELF) {\n\t\treturn (\n\t\t\t<div className=\"hidden\"/>\n\t\t)\n\t}\n\n\tconsole.log('BookShelf render() ===>', mode)\n\n\tlet books = [];\n\tlet i = 0;\n\twhile (i < contents.length && i < 100) {\n\t\tconst content = contents[i];\n\t\t// console.log(\"content====>\", content);\n\t\tconst book = <Book key={\"\" + i} book={content}/>\n\t\tbooks.push(book);\n\t\ti = i + 1;\n\t}\n\n\treturn (\n\t\t<Box marginBottom='5em'\n\t\t\tsx={{\n\t\t\t\twidth: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\tflexDirection: 'row',\n\t\t\t\tflexWrap: 'wrap'\n\t\t\t}}>\n\t\t\t{books}\n\t\t</Box>\n\t)\n}\n\nexport default BookShelf;","// import './App.css';\n\nimport {fbAuth} from \"./firebase/features\";\nimport {useEffect, useReducer, useState} from \"react\";\nimport {ACTION_CHANGE_MODE, SCREEN_MODE_SIGN_IN, SCREEN_MODE_USER_RANK_DAILY} from \"./const\";\nimport Signin from \"./components/Signin\";\nimport UserList from \"./components/UserList\";\nimport stateReducer, {initValues, MyContext} from \"./hooks/reducer\";\nimport ResponsiveAppBar from \"./components/ResponsiveAppBar\";\nimport {Container} from \"@mui/material\";\nimport BookShelf from \"./components/BookShelf\";\n\n\nconst useFirebaseAuthentication = () => {\n    const [authUser, setAuthUser] = useState(null);\n\n    useEffect(() =>{\n        const unlisten = fbAuth.onAuthStateChanged(\n            authUser => {\n                console.log(\"authUser=>\", authUser);\n\n                authUser\n                    ? setAuthUser(authUser)\n                    : setAuthUser(null);\n            },\n        );\n        return () => {\n            unlisten();\n        }\n    }, []);\n\n    return authUser\n}\n\nconst logout = (dispatch) => {\n    fbAuth.signOut().then((result)=> {\n        console.log(\"signed out~!!\");\n        dispatch({\n            type: ACTION_CHANGE_MODE,\n            mode: SCREEN_MODE_SIGN_IN\n        });\n    }).catch((error)=> {\n        console.log(\"signed out failed~!!!\", error)\n    });\n}\n\n\nfunction App(props) {\n    const [state, dispatch, selectedUser] = useReducer(stateReducer, initValues, undefined);\n    console.log(\"App state=>\", state);\n    const authUser = useFirebaseAuthentication();\n\n    console.log(\"app render()...\", authUser);\n\n    useEffect(()=>{\n        if (authUser === null) {\n            dispatch({type: ACTION_CHANGE_MODE,\n                mode: SCREEN_MODE_SIGN_IN});\n        } else {\n            dispatch({type: ACTION_CHANGE_MODE,\n                mode: SCREEN_MODE_USER_RANK_DAILY});\n        }\n    }, [authUser]);\n\n    return (\n        <MyContext.Provider value={{state, dispatch, logout}}>\n            <div>\n                <ResponsiveAppBar props={props} user={authUser}/>\n                <Signin/>\n                <UserList/>\n                <BookShelf/>\n            </div>\n        </MyContext.Provider>\n    );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
{"version":3,"sources":["firebase/features.js","const.js","hooks/reducer.js","components/Signin.js","components/UserCard.js","components/UserList.js","components/ResponsiveAppBar.js","components/UserAvatar.js","components/AvatarList.js","components/Review.js","components/ReviewList.js","components/Book.js","components/BookShelf.js","components/Home.js","App.js","reportWebVitals.js","index.js"],"names":["firebaseApp","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","fbDB","getAnalytics","getFirestore","fbAuth","getAuth","fbStorage","getStorage","googleAuthProvider","GoogleAuthProvider","SCREEN_MODE_INIT","SCREEN_MODE_SIGN_IN","SCREEN_MODE_USER_RANK_DAILY","SCREEN_MODE_USER_RANK_WEEKLY","SCREEN_MODE_USER_RANK_MONTHLY","SCREEN_MODE_GOOD_WRITER","SCREEN_MODE_BEST_READER","SCREEN_MODE_BOOK_SHELF","ACTION_CHANGE_MODE","ACTION_USER_SELECTED","MyContext","React","createContext","initValues","mode","userRankList","selectedUser","stateReducer","state","action","newState","console","log","type","Object","assign","user","Signin","useContext","dispatch","className","Container","sx","display","justifyContent","alignItems","marginTop","Button","onClick","signInWithPopup","then","result","token","credentialFromResult","accessToken","catch","error","errorCode","code","errorMessage","message","email","credential","credentialFromError","login","useStyles","makeStyles","spacing","palette","family","card","padding","minWidth","width","margin","borderRadius","boxShadow","marginRight","flex","cursor","avatar","height","heading","fontFamily","fontSize","marginBottom","subheader","color","grey","letterSpacing","value","marginLeft","useSliderStyles","root","rail","backgroundColor","track","thumb","queryClientInfo","profileId","a","q","doc","getDoc","UserCard","memo","userItem","screenMode","userUrl","useState","imageUrl","setImageUrl","clientInfo","setClientInfo","useEffect","storageRef","ref","getDownloadURL","window","localStorage","setItem","JSON","stringify","e","data","prefix","postfix","styles","sliderStyles","progressValue","read","goal","Math","floor","Card","cx","elevation","handleCardClick","Avatar","src","Box","profileName","age","style","like","Slider","classes","getWeekOfYear","currentDate","oneJan","Date","getFullYear","numberOfDays","getDay","queryCallAsync","date","path","retrieveNum","getMonth","getDate","query","collection","where","orderBy","limit","Promise","resolve","getDocs","UserList","setError","userList","setUserList","r","itemList","forEach","push","textAlign","verticalAlign","flexDirection","flexWrap","length","map","i","pages","settings","HideOnScroll","props","children","trigger","useScrollTrigger","target","undefined","Slide","appear","direction","in","ResponsiveAppBar","logout","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","filter","page","getDefaultTitle","title","setTitle","downloadUrl","photoURL","handleCloseNavMenu","item","innerText","dataset","index","parentElement","AppBar","maxWidth","Toolbar","disableGutters","Typography","variant","noWrap","component","mr","xs","md","flexGrow","IconButton","size","event","currentTarget","Menu","id","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","MenuItem","my","Tooltip","p","alt","mt","setting","UserAvatar","imageLink","setImageLink","AvatarList","users","avatar_list","Stack","Review","review","writerEmail","writerProfileId","ListItem","ListItemAvatar","ListItemText","primary","secondary","bodyMessage","queryReviewListAsync","isbn","ReviewList","reviewList","setReviewList","List","CircularProgress","dialogStyle","queryBookDetails","Book","book","imageBigUrl","setImageBigUrl","setOpen","bookDetails","setBookDetails","bookThumbnailUrl","handleClickOpen","imageLinkBig","LoadBookDetails","startsWith","readDate","dateStr","Dialog","scroll","DialogContent","DialogTitle","onError","readPeople","DialogContentText","Divider","DialogActions","BookShelf","contents","setContents","initSqlJs","locateFile","filename","SQL","url","xhr","XMLHttpRequest","responseType","onload","blob","response","uInt8Array","Uint8Array","Database","exec","values","send","books","slice","Home","signOut","App","useReducer","authUser","setAuthUser","unlisten","onAuthStateChanged","useFirebaseAuthentication","theme","createTheme","Provider","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yPAiBaA,EAAcC,YAXJ,CACtBC,OAAQ,0CACRC,WAAY,mCACZC,YAAa,0CACbC,UAAW,mBACXC,cAAe,+BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAKHC,GADcC,YAAaX,GACpBY,YAAaZ,IACpBa,EAASC,YAAQd,GACjBe,EAAYC,YAAWhB,GACvBiB,EAAqB,IAAIC,ICrBzBC,EAAmB,OACnBC,EAAsB,UACtBC,EAA8B,kBAC9BC,EAA+B,mBAC/BC,EAAgC,oBAChCC,EAA0B,cAG1BC,EAA0B,cAE1BC,EAAyB,aAEzBC,EAAqB,cAErBC,EAAuB,gBCNvBC,EAAYC,IAAMC,cAAc,IAEhCC,EAAa,CACzBC,KAAMd,EACNe,aAAc,KACdC,aAAc,MAiCAC,EA9Ba,SAACC,EAAOC,GAEnC,IAAIC,EACJ,OAFAC,QAAQC,IAAI,mBAAoBJ,EAAOC,GAE/BA,EAAOI,MACd,KAAKf,EACJY,EAAWI,OAAOC,OAAO,GAAIP,EAAO,CACnCJ,KAAMK,EAAOL,OAEd,MAED,IDb4C,0BCc3CM,EAAWI,OAAOC,OAAO,GAAIP,EAAO,CACnCH,aAAcI,EAAOJ,eAEtB,MAED,KAAKN,EACJW,EAAWI,OAAOC,OAAO,GAAIP,EAAO,CACnCF,aAAcG,EAAOO,KACrBZ,KAAMP,IAEP,MAED,QACCa,EAAWP,EAGb,OADAQ,QAAQC,IAAI,sBAAuBF,GAC5BA,G,yBCmBOO,EA9BA,WACd,MAA0BC,qBAAWlB,GAA9BQ,EAAP,EAAOA,MAAOW,EAAd,EAAcA,SACdR,QAAQC,IAAI,iBAAkBJ,GAE9B,IAAMJ,EAAOI,EAAMJ,KAGnB,OADAO,QAAQC,IAAI,kBAAmBR,GAC3BA,IAASb,GACZoB,QAAQC,IAAI,wBAEX,qBAAKQ,UAAU,aAGjBT,QAAQC,IAAI,yBAEX,cAACS,EAAA,EAAD,CAAWC,GAAI,CACdC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,UAAW,IAJZ,SAMC,cAACC,EAAA,EAAD,CAAQC,QACP,YA/CU,SAACT,GACdU,YAAgB7C,EAAQI,GACtB0C,MAAK,SAACC,GAEN,IACMC,EADa3C,IAAmB4C,qBAAqBF,GAClCG,YAEnBlB,EAAOe,EAAOf,KAEpBL,QAAQC,IAAI,qCAAaI,EAAMgB,GAC/Bb,EAAS,CAACN,KAAMf,EAAoBM,KAAMZ,OACxC2C,OAAM,SAACC,GAEV,IAAMC,EAAYD,EAAME,KAClBC,EAAeH,EAAMI,QAErBC,EAAQL,EAAMK,MAEdC,EAAarD,IAAmBsD,oBAAoBP,GAC1DzB,QAAQC,IAAI,UAAWyB,EAAWE,EAAcE,EAAOC,GACvD/B,QAAQC,IAAI,yCA4BTgC,CAAMzB,IAFR,kD,4ECpCG0B,EAAYC,aAAW,YAAyB,IAAvBC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,QAEjCC,EACL,gJACD,MAAO,CACNC,KAAM,CACL3B,QAAS,OACT4B,QAASJ,EAAQ,GACjBK,SAAU,IACVC,MAAO,IACPC,OAAQP,EAAQ,GAChBQ,aAAc,GACdC,UAAW,uCACX,qBAAsB,CACrBC,YAAaV,EAAQ,IAEtB,qBAAsB,CACrBW,KAAM,QAEPC,OAAQ,WAETC,OAAQ,CACPP,MAAO,IACPQ,OAAQ,KAETC,QAAS,CACRC,WAAYd,EACZe,SAAU,GACVC,aAAc,GAEfC,UAAW,CACVH,WAAYd,EACZe,SAAU,GACVG,MAAOnB,EAAQoB,KAAK,KACpBC,cAAe,MACfJ,aAAc,GAEfK,MAAO,CACNC,WAAY,EACZP,SAAU,GACVG,MAAOnB,EAAQoB,KAAK,UAKjBI,EAAkB1B,aAAW,iBAAO,CACzC2B,KAAM,CACLZ,OAAQ,GAETa,KAAM,CACLnB,aAAc,GACdM,OAAQ,EACRc,gBAAiB,oBAElBC,MAAO,CACNrB,aAAc,GACdM,OAAQ,EACRc,gBAAiB,oBAElBE,MAAO,CACNtD,QAAS,YAILuD,EAAe,uCAAG,WAAOrC,EAAOsC,GAAd,eAAAC,EAAA,6DACjBC,EAAIC,YAAIrG,EAAM,qBAAP,UAAgC4D,EAAhC,YAAyCsC,IAD/B,SAEVI,YAAOF,GAFG,mFAAH,wDAiFNG,EAxEEC,gBAAK,YAA6B,IAA3BC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,WAC1BpE,EAAYD,qBAAWlB,GAAvBmB,SACDqE,EAAUF,EAAS7C,MAAT,UAAoB6C,EAAS7C,MAA7B,YAAsC6C,EAASP,WAAa,GAC5E,EAAgCU,mBAAS,MAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAoCF,mBAAS,IAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACAlF,QAAQC,IAAI,uBAAwB0E,GAEpCQ,qBAAU,WACT,IACC,IAAIC,EAAaC,YAAI9G,EAAD,8BAAmCsG,EAAnC,SACpBS,YAAeF,GAAYjE,MAAK,SAAAwC,GAC/B3D,QAAQC,IAAI,gBAAiB0D,GAC7B4B,OAAOC,aAAaC,QAAQZ,EAASa,KAAKC,UAAUhC,IACpDqB,EAAYrB,MAEZ,MAAOiC,OAGP,CAACjB,EAAUE,IAEdM,qBAAU,WACT,IACChB,EAAgBQ,EAAS7C,MAAO6C,EAASP,WAAWjD,MAAK,SAAAoD,GACxDvE,QAAQC,IAAI,gBAAiBsE,EAAIsB,QACjCX,EAAcX,EAAIsB,WAElB,MAAOD,OAIP,CAACjB,IAEJ,IAAImB,EAAS,GACTC,EAAU,mCAEVnB,IAAe/F,EAClBiH,EAAS,iBACClB,IAAe9F,EACzBgH,EAAS,wBACClB,IAAe7F,EACzB+G,EAAS,wBACClB,IAAe5F,IACzB8G,EAAS,wBACTC,EAAU,IAGX,IAAMC,EAAS9D,IACT+D,EAAepC,IAEfqC,EAAgBjB,GAAcA,EAAWkB,MAAQlB,EAAWmB,KACjEC,KAAKC,MAAyB,IAAlBrB,EAAWkB,KAAclB,EAAWmB,MAAQ,EAEzD,OACC,eAACG,EAAA,EAAD,CAAM9F,UAAW+F,YAAGR,EAAOzD,MAAOkE,UAAW,EACvCxF,QAAS,YA1DO,SAACT,EAAUyE,GAClCzE,EAAS,CAACN,KAAMd,EAAsBiB,KAAM4E,IAyDrByB,CAAgBlG,EAAUyE,IADhD,UAEC,cAAC0B,EAAA,EAAD,CAAQC,IAAK7B,EAAUtE,UAAWuF,EAAO/C,SACzC,eAAC4D,EAAA,EAAD,WACC,oBAAIpG,UAAWuF,EAAO7C,QAAtB,SAAgC8B,EAAW6B,cAC3C,oBAAGrG,UAAWuF,EAAOzC,UAArB,UAAiC0B,EAAW8B,IAA5C,gBACEjB,EADF,IACU,sBAAMkB,MAAO,CAACxD,MAAO,SAArB,SACRoB,IAAe5F,EACd2F,EAASsC,KAAMtC,EAASwB,OAH3B,IAGyCJ,KAEzC,eAACc,EAAA,EAAD,CAAKjG,QAAS,OAAQE,WAAY,SAAlC,UACC,cAACoG,EAAA,EAAD,CAAQC,QAASlB,EAActC,MAAOuC,IACtC,uBAAMzF,UAAWuF,EAAOrC,MAAxB,UAAgCsB,EAAWkB,KAA3C,IAAkDlB,EAAWmB,oBC3I5DgB,EAAgB,SAACC,GACnB,IAAMC,EAAS,IAAIC,KAAKF,EAAYG,cAAc,EAAE,GAC9CC,EAAepB,KAAKC,OAAOe,EAAcC,GAAf,OAChC,OAAOjB,KAAKC,OAAOe,EAAYK,SAAW,EAAID,GAAgB,IAG5DE,EAAc,uCAAG,WAAOlI,GAAP,qBAAA4E,EAAA,yDACbuD,EAAO,IAAIL,KACbM,EAFe,GAGfvD,EAAI,KAERtE,QAAQC,IAAIR,GAENqI,EAAc,GAEhBrI,IAASZ,EACTgJ,EAAI,4BAAwBD,EAAKJ,cAA7B,YAA8CI,EAAKG,WAAa,EAAhE,YAAqEH,EAAKI,UAA1E,qBAAgGJ,EAAKJ,cAArG,YAAsHI,EAAKG,WAAa,EAAxI,YAA6IH,EAAKI,WAC/IvI,IAASX,EAChB+I,EAAI,6BAAyBD,EAAKJ,cAA9B,YAA+CJ,EAAcQ,GAA7D,sBAAgFA,EAAKJ,cAArF,YAAsGJ,EAAcQ,IACjHnI,IAASV,EAChB8I,EAAI,8BAA0BD,EAAKJ,cAA/B,YAAgDI,EAAKG,WAAa,EAAlE,uBAAkFH,EAAKJ,cAAvF,YAAwGI,EAAKG,WAAa,GACvHtI,IAASR,EAChB4I,EAAI,qBACGpI,IAAST,GAChB6I,EAAO,qBACPvD,EAAI2D,YAAMC,YAAWhK,EAAM2J,GAAOM,YAAM,OAAQ,IAAK,GAAIC,YAAQ,OAAQ,QAASC,YAAMP,KJnCzD,gBIoCxBrI,EACPoI,EAAO,QJpC0B,kBIqC1BpI,IACPoI,EAAO,kBACPvD,EAAI2D,YAAMC,YAAWhK,EAAM2J,GAAOO,YAAQ,cAAe,QAASC,YAAMP,KAE5E9H,QAAQC,IAAI,gBAAiB4H,GAExBA,EA5Bc,yCA6BR,IAAIS,SAAQ,SAACC,GAChBA,EAAQ,QA9BG,cAkCT,OAANjE,IACAA,EAAI2D,YAAMC,YAAWhK,EAAM2J,GAAOM,YAAM,OAAQ,IAAK,GAAIC,YAAQ,OAAQ,QAASC,YAAMP,KAnCzE,UAoCNU,YAAQlE,GApCF,qFAAH,sDAgHLmE,EAzEE,WACb,IAAO5I,EAASU,qBAAWlB,GAApBQ,MACP,EAA0BiF,mBAAS,MAAnC,mBAAOrD,EAAP,KAAciH,EAAd,KACA,EAAgC5D,mBAAS,MAAzC,mBAAO6D,EAAP,KAAiBC,EAAjB,KACMnJ,EAAOI,EAAMJ,KAqBnB,OApBAO,QAAQC,IAAI,gDAAiDR,EAAMkJ,GAEnExD,qBAAW,WACP,IACIuD,EAAS,MACTE,EAAY,MACZjB,EAAelI,GAAM0B,MAAK,SAAA0H,GACtB,IAAIC,EAAW,GACfD,EAAEE,SAAQ,SAACxE,GACP,IAAMsB,EAAOtB,EAAIsB,OACjBiD,EAASE,KAAKnD,MAElB7F,QAAQC,IAAI,8BAA+B6I,GAC3CF,EAAYE,MAElB,MAAOlD,GACL8C,EAAS9C,MAEd,CAACnG,IAEAA,IAASV,GACTU,IAASX,GACTW,IAASZ,GACTY,IAASR,GACTQ,IAAST,EAEL,wBAGJyC,EACA,cAACoF,EAAA,EAAD,CAAK9F,UAAU,OAAOJ,GAAI,CACtBsI,UAAW,SACXC,cAAe,SACfhG,OAAQ,UAHZ,SAKI,uIAA0BzB,OAIjB,OAAbkH,EACA,cAAC9B,EAAA,EAAD,CAAK9F,UAAU,OAAOJ,GAAI,CACtBsI,UAAW,SACXC,cAAe,SACfhG,OAAQ,UAHZ,SAKI,oGAKJ,cAAC2D,EAAA,EAAD,CAAK9F,UAAU,MAAMJ,GAAI,CACrB+B,MAAO,OACP9B,QAAS,OACTC,eAAgB,SAChBsI,cAAe,MACfC,SAAU,QALd,SAQQT,GAAYA,EAASU,OAAS,EACtBV,EAASW,KAAI,SAACjJ,EAAMkJ,GAAP,OAAa,cAAC,EAAD,CAAuB5E,SAAUtE,EAAMuE,WAAYnF,GAApC,GAAK8J,MAClD,8BACI,uG,qHCpGlBC,GAAQ,CACb,CACC/J,KAAMT,EACN2E,MAAO,6DAUR,CACClE,KAAMZ,EACN8E,MAAO,yCAER,CACClE,KAAMX,EACN6E,MAAO,mCAER,CACClE,KAAMV,EACN4E,MAAO,mCAER,CACClE,KAAMR,EACN0E,MAAO,oCAQH8F,GAAW,CAAC,UAAW,UAAW,YAAa,UAE/CC,GAAe,SAACC,GACrB,IAAQC,EAAqBD,EAArBC,SAAUrE,EAAWoE,EAAXpE,OAIZsE,EAAUC,aAAiB,CAChCC,OAAQxE,EAASA,SAAWyE,IAG7B,OACC,cAACC,GAAA,EAAD,CAAOC,QAAQ,EAAOC,UAAU,OAAOC,IAAKP,EAA5C,SACED,KAuMWS,GA9KU,SAACV,GACzB,MAAkCpJ,qBAAWlB,GAAtCQ,EAAP,EAAOA,MAAOW,EAAd,EAAcA,SAAU8J,EAAxB,EAAwBA,OAClBjK,EAAOsJ,EAAMtJ,KACnB,EAAsCyE,mBAAS,MAA/C,mBAAOyF,EAAP,KAAoBC,EAApB,KACA,EAAwC1F,mBAAS,MAAjD,mBAAO2F,EAAP,KAAqBC,EAArB,KACA,EAAgC5F,mBAAS,MAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA0BF,mBAjBH,SAACrF,GAExB,IAAM2B,EAASoI,GAAMmB,QAAO,SAAAC,GAAI,OAAInL,IAASmL,EAAKnL,QAClD,OAAI2B,EAAOiI,OAAS,GACnBrJ,QAAQC,IAAI,oBAAqBmB,GAC1BA,EAAO,GAAGuC,OAEV,2BAU2BkH,CAAgBlM,IAAnD,mBAAOmM,EAAP,KAAcC,EAAd,KAEA/K,QAAQC,IAAI,2BAA4B6K,EAAOjL,EAAMJ,MAErD0F,qBAAU,WACT,GAAI9E,EAAM,CACT,IAAMwE,EAAO,UAAMxE,EAAKyB,OAClBkJ,EAAc3K,EAAK4K,SAGzB,GAFAjL,QAAQC,IAAI,iCAAkC+K,GAEzCA,EAOJhG,EAAYgG,OAPK,CACjB,IAAI5F,EAAaC,YAAI9G,EAAD,8BAAmCsG,EAAnC,SACpBS,YAAeF,GAAYjE,MAAK,SAAAwC,GAC/B3D,QAAQC,IAAI,mBAAoB0D,GAChCqB,EAAYrB,UAMb,CAACtD,IAIJ,IASM6K,EAAqB,SAACC,GAG3B,GAFAnL,QAAQC,IAAI,qBAAsBkL,GAClCX,EAAe,MACe,WAA1BW,EAAKpB,OAAOqB,UAKf,OAJApL,QAAQC,IAAI,cACZyK,EAAgB,MAChB1F,EAAY,SACZsF,EAAO9J,GAIJ2K,EAAKpB,OAAOsB,QAAQC,MACvB9K,EAAS,CAACN,KAAMf,EAAoBM,KAAM0L,EAAKpB,OAAOsB,QAAQC,QACrDH,EAAKpB,OAAOwB,cAAcF,QAAQC,QAC3CP,EAASI,EAAKpB,OAAOqB,WACrB5K,EAAS,CAACN,KAAMf,EAAoBM,KAAM0L,EAAKpB,OAAOwB,cAAcF,QAAQC,UAY9E,OAHIzL,EAAMJ,OAASb,GACL,SAGb,cAAC,GAAD,2BAAkB+K,GAAlB,aACA,cAAC6B,EAAA,EAAD,UACC,cAAC9K,EAAA,EAAD,CAAW+K,SAAS,KAApB,SACC,eAACC,EAAA,EAAD,CAASC,gBAAc,EAAvB,UACC,cAACC,GAAA,EAAD,CACCC,QAAQ,KACRC,QAAM,EACNC,UAAU,MACVpL,GAAI,CAAEqL,GAAI,EAAGpL,QAAS,CAAEqL,GAAI,OAAQC,GAAI,SAJzC,sCASA,eAACrF,EAAA,EAAD,CAAKlG,GAAI,CAAEwL,SAAU,EAAGvL,QAAS,CAAEqL,GAAI,OAAQC,GAAI,SAAnD,UACC,cAACE,GAAA,EAAD,CACCC,KAAK,QACL,aAAW,0BACX,gBAAc,cACd,gBAAc,OACdpL,QAxDoB,SAACqL,GAC1BtM,QAAQC,IAAI,sBAAuBqM,EAAMC,eACzC/B,EAAe8B,EAAMC,gBAuDhB/I,MAAM,UANP,SAQC,cAAC,KAAD,MAED,cAACgJ,GAAA,EAAD,CACCC,GAAG,cACHC,SAAUnC,EACVoC,aAAc,CACbC,SAAU,SACVC,WAAY,QAEbC,aAAW,EACXC,gBAAiB,CAChBH,SAAU,MACVC,WAAY,QAEbG,KAAMC,QAAQ1C,GACd2C,QAAShC,EACTvK,GAAI,CACHC,QAAS,CAAEqL,GAAI,QAASC,GAAI,SAf9B,SAkBE1C,GAAMF,KAAI,SAACsB,GAAD,OACV,cAACuC,GAAA,EAAD,CACU,aAAYvC,EAAKnL,KAAMwB,QAASiK,EAD1C,SAEC,cAACU,GAAA,EAAD,CAAY3C,UAAU,SAAtB,SAAgC2B,EAAKjH,SAFvBiH,EAAKnL,cAOvB,cAACmM,GAAA,EAAD,CACCC,QAAQ,KACRC,QAAM,EACNC,UAAU,MACVpL,GAAI,CAAEwL,SAAU,EAAGvL,QAAS,CAAEqL,GAAI,OAAQC,GAAI,SAJ/C,SAMEpB,IAEF,cAACjE,EAAA,EAAD,CAAKlG,GAAI,CAAEwL,SAAU,EAAGvL,QAAS,CAAEqL,GAAI,OAAQC,GAAI,SAAnD,SACE1C,GAAMF,KAAI,SAACsB,GAAD,OACV,cAAC5J,EAAA,EAAD,CAEC,aAAY4J,EAAKnL,KACjBwB,QAASiK,EACTvK,GAAI,CAAEyM,GAAI,EAAG5J,MAAO,QAAS5C,QAAS,SAJvC,SAMEgK,EAAKjH,OALDiH,EAAKnL,WAUb,eAACoH,EAAA,EAAD,CAAKlG,GAAI,CAAEwL,SAAU,GAArB,UACC,cAACkB,GAAA,EAAD,CAASvC,MAAM,gBAAf,SACC,cAACsB,GAAA,EAAD,CAAYnL,QA1GS,SAACqL,GAC3BtM,QAAQC,IAAI,uBAAwBqM,EAAMC,eAC1C7B,EAAgB4B,EAAMC,gBAwGwB5L,GAAI,CAAE2M,EAAG,GAAlD,SACC,cAAC3G,EAAA,EAAD,CAAQ4G,IAAI,aAAa3G,IAAK7B,QAGhC,cAACyH,GAAA,EAAD,CACC7L,GAAI,CAAE6M,GAAI,QACVf,GAAG,cACHC,SAAUjC,EACVkC,aAAc,CACbC,SAAU,MACVC,WAAY,SAEbC,aAAW,EACXC,gBAAiB,CAChBH,SAAU,MACVC,WAAY,SAEbG,KAAMC,QAAQxC,GACdyC,QApGsB,WAC3BxC,EAAgB,OAqFZ,SAgBEjB,GAASH,KAAI,SAACmE,GAAD,OACb,cAACN,GAAA,EAAD,CAAwBlM,QAASiK,EAAjC,SACC,cAACU,GAAA,EAAD,CAAY3C,UAAU,SAAtB,SAAgCwE,KADlBA,sB,yFC9ORC,GAlBI,SAAC,GAAY,IAAXrN,EAAU,EAAVA,KACpB,EAAkCyE,mBAAS,MAA3C,mBAAO6I,EAAP,KAAkBC,EAAlB,KACM/I,EAAUxE,EAAKyB,MAAL,UAAgBzB,EAAKyB,MAArB,YAA8BzB,EAAK+D,WAAa,GAWhE,OATApE,QAAQC,IAAI,kBAAmBI,GAC/B8E,qBAAU,WACT,IAAIC,EAAaC,YAAI9G,EAAD,8BAAmCsG,EAAnC,SACpBS,YAAeF,GAAYjE,MAAK,SAAAwC,GAC/B3D,QAAQC,IAAI,gBAAiB0D,GAC7BiK,EAAajK,QAEZ,CAACtD,EAAMwE,IAGT,cAAC8B,EAAA,EAAD,CAAQC,IAAK+G,EAAWJ,IAAI,cCAfM,GAhBI,SAAC,GAAa,IAAZC,EAAW,EAAXA,MAEhBC,EAAc,GAMlB,OALAD,EAAM/E,SAAQ,SAAA1I,GACb0N,EAAY/E,KAAK,cAAC,GAAD,CAAY3I,KAAMA,QAKnC,cAAC2N,GAAA,EAAD,CACCR,GAAI,EAAGrD,UAAU,MAAM/H,QAAS,EADjC,SAEE2L,K,wCCTE5J,GAAe,uCAAG,WAAOrC,EAAOsC,GAAd,eAAAC,EAAA,6DACjBC,EAAIC,YAAIrG,EAAM,qBAAP,UAAgC4D,EAAhC,YAAyCsC,IAD/B,SAEVI,YAAOF,GAFG,mFAAH,wDAuCN2J,GAlCA,SAAC,GAAc,IAAbC,EAAY,EAAZA,OAChB,EAAoCpJ,mBAAS,MAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACAlF,QAAQC,IAAI,mBAAoBiO,GAEhC,IAAM7N,EAAO,CACZyB,MAAOoM,EAAOC,YACd/J,UAAW8J,EAAOE,iBAUnB,OAPAjJ,qBAAU,WACThB,GAAgB9D,EAAKyB,MAAOzB,EAAK+D,WAAWjD,MAAK,SAAAoD,GAChDvE,QAAQC,IAAI,gBAAiBsE,EAAIsB,QACjCX,EAAcX,EAAIsB,aAEjB,CAACxF,EAAKyB,MAAOzB,EAAK+D,YAGpB,eAACiK,GAAA,EAAD,CAAUvN,WAAW,aAArB,UACC,cAACwN,GAAA,EAAD,UACC,cAAC,GAAD,CAAYf,IAAI,WAAWlN,KAAMA,MAElC,cAACkO,GAAA,EAAD,CACCC,QACCvJ,EACCA,EAAW6B,YAAY,GAEzB2H,UACCP,EAAOQ,kBC/BNC,GAAoB,uCAAG,WAAOC,GAAP,eAAAvK,EAAA,6DACtBC,EAAI2D,YAAMC,YAAWhK,EAAM,mBAAoBiK,YAAM,OAAQ,KAAMyG,GAAOxG,YAAQ,cAAe,QAASC,YAAM,KAD1F,SAEfG,YAAQlE,GAFO,mFAAH,sDA+BXuK,GA1BI,SAAC,GAAY,IAAXD,EAAU,EAAVA,KACpB,EAAoC9J,mBAAS,MAA7C,mBAAOgK,EAAP,KAAmBC,EAAnB,KAgBA,OAfA/O,QAAQC,IAAI,kBAAmB2O,GAE/BzJ,qBAAW,WACVwJ,GAAqBC,GAAMzN,MAAK,SAAA0H,GAC/B,IAAIC,EAAW,GACfD,EAAEE,SAAQ,SAACxE,GACV,IAAMsB,EAAOtB,EAAIsB,OACjBiD,EAASE,KACR,cAAC,GAAD,CAAQkF,OAAQrI,QAGlBkJ,EAAcjG,QAEb,CAAC8F,IAGFE,EACwB,IAAtBA,EAAWzF,OACX,cAACuC,GAAA,EAAD,CAAY5E,MAAO,CAACiC,UAAU,UAAWwD,GAAG,0BAA0B9L,GAAI,CAAE6M,GAAI,GAAhF,8EACA,cAACwB,GAAA,EAAD,UAAOF,IACN,cAACG,GAAA,EAAD,KCdAC,GAAc,CACnBtO,QAAS,OACNC,eAAgB,SACnBsI,cAAe,MACfC,SAAU,QAGL+F,GAAgB,uCAAG,WAAOP,GAAP,eAAAvK,EAAA,6DAClBC,EAAIC,YAAIrG,EAAM,QAAS0Q,GADL,SAEXpK,YAAOF,GAFI,mFAAH,sDAiJP8K,GA3HF,SAAC,GAAY,IAAXC,EAAU,EAAVA,KACd,EAAgCvK,mBAAS,MAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAsCF,mBAAS,MAA/C,mBAAOwK,EAAP,KAAoBC,EAApB,KACA,EAAwBzK,oBAAS,GAAjC,mBAAOkI,EAAP,KAAawC,EAAb,KACA,EAAsC1K,mBAAS,MAA/C,mBAAO2K,EAAP,KAAoBC,EAApB,KACA1P,QAAQC,IAAI,WAAY8E,GAExB,IAAI4K,EAAmBN,EAAK,IACxBtK,IACH4K,EAAmB5K,GAEpB,IAAM6K,EAAkB,WACvBJ,GAAQ,GA7Bc,SAACZ,EAAMc,EAAgBH,GAC9CvP,QAAQC,IAAI,yBAA0B2O,GACtCO,GAAiBP,GAAMzN,MAAK,SAAA0H,GAC3B,IAAM4G,EAAc5G,EAAEhD,OACtB7F,QAAQC,IAAI,sCAAuC4I,EAAEhD,QACjD4J,EAAYI,eACf7P,QAAQC,IAAI,kCAAmCwP,EAAYI,cAC3DN,EAAeE,EAAYI,eAE5BH,EAAe7G,EAAEhD,WAEfrE,OAAM,SAAAoE,GACR5F,QAAQC,IAAI,oCAAqC2F,GACjD8J,EAAe,OAkBdI,CAAgBT,EAAK,IAAKK,EAAgBH,IAkB5CpK,qBAAU,WACT,GAAIwK,EAAiBI,WAAW,SAAU,CACzC,IAAI3K,EAAaC,YAAI9G,EAAWoR,GAChCrK,YAAeF,GAAYjE,MAAK,SAAAwC,GAC/B3D,QAAQC,IAAI,8BAA+B0D,GAC3CqB,EAAYrB,WAGbqB,EAAY2K,KAEX,IAEH,IAAMK,GAAYX,EAAK,IACjBzH,EAAO,IAAIL,KAAKyI,GACtBhQ,QAAQC,IAAI,aAAc2H,GAC1B,IAAMqI,EAAO,UAAMrI,EAAKJ,cAAX,kBAA6BI,EAAKG,WAAW,EAA7C,kBAAmDH,EAAKI,UAAxD,UAEb,OACC,gCACC,cAACtH,EAAA,EAAD,CAAWD,UAAU,mBAArB,SAEEsE,GAAYA,EAASgL,WAAW,QAC/B,qBAAK9O,QAAS2O,EAAiBnP,UAAU,UAAUmG,IAAK7B,EAAUwI,IAAK8B,EAAK,KAE5E,sBAAKpO,QAAS2O,EAAiBnP,UAAU,QAAzC,UACC,qBAAKA,UAAU,UAAUmG,IAAI,GAAG2G,IAAI,KACnC,qBAAK9M,UAAU,OAAf,SACC,6BAAK4O,EAAK,YAKhB,eAACa,GAAA,EAAD,CACClD,KAAMA,EACNE,QAjDiB,WACnBsC,GAAQ,IAiDN,kBAAgB,0BAChB,mBAAiB,0BACjBW,OAAQ,QACR1P,UAAU,cANX,UAQC,eAAC2P,GAAA,EAAD,CAAe3D,GAAG,0BAA0B9L,GAAI,CAAE6M,GAAI,GAAtD,UACC,cAAC6C,GAAA,EAAD,CAAa5D,GAAG,oBAAoBZ,QAAQ,KAAKE,UAAU,KAA3D,SACEsD,EAAK,KAGP,cAACxI,EAAA,EAAD,CAAKlG,GAAIuO,GAAT,SACC,qBAAKzO,UAAU,eAAemG,IAAK0I,IAA0BvK,GAAoB,IAAIwI,IAAK8B,EAAK,GAC1FiB,QArDiB,SAAC1K,GAC3B5F,QAAQC,IAAI,0BAA2B2F,EAAEmE,OAAOnD,IAAK7B,EAAUa,GAC3DA,EAAEmE,OAAOnD,KAAO7B,GAAYa,EAAEmE,OAAOnD,MAAQ7B,IAChDa,EAAEmE,OAAOnD,IAAM7B,QAoDb,eAAC6G,GAAA,EAAD,CAAYa,GAAG,0BAA0B9L,GAAI,CAAE6M,GAAI,GAAnD,UACC,sBAAMxG,MAAO,CAACxD,MAAO,OAArB,SAA8ByM,IAD/B,4CAIkB,OAAhBR,EACAA,EAAYtJ,KACX,gCACC,eAACyF,GAAA,EAAD,CAAYa,GAAG,0BAA0B9L,GAAI,CAAE6M,GAAI,GAAnD,0DACW,sBAAMxG,MAAO,CAACxD,MAAO,OAArB,SAA8BiM,EAAYtJ,OADrD,mDAGA,cAACiK,GAAA,EAAD,UACC,cAAC,GAAD,CAAYpJ,MAAO,CAClBpG,QAAS,OACTC,eAAgB,SAChBsI,cAAe,MACfC,SAAU,QACR0E,MAAO2B,EAAYc,kBAEhB,wBAAS,cAACtB,GAAA,EAAD,IAGpB,cAACuB,GAAA,EAAD,CAAmB/D,GAAG,2BAAtB,SACC,cAACb,GAAA,EAAD,CAAYa,GAAG,0BAA0B9L,GAAI,CAAE6M,GAAI,GAAnD,SACE6B,EAAK,OAIR,cAACoB,GAAA,EAAD,CAAS9P,GAAI,CAAC6M,GAAG,KACjB,cAAC,GAAD,CAAYoB,KAAMS,EAAK,SAExB,cAACqB,GAAA,EAAD,UAEErB,EAAK,IACJ,cAACrO,EAAA,EAAD,CAAQC,QA7FK,WAClBuO,GAAQ,GACRjK,OAAOyH,KAAKqC,EAAK,MA2FZ,uGACA,iCC5DQsB,GA7FG,WACjB,IAAO9Q,EAASU,qBAAWlB,GAApBQ,MACP,EAAgCiF,mBAAS,IAAzC,mBAAO8L,EAAP,KAAiBC,EAAjB,KACA,EAA0B/L,mBAAS,MAAnC,mBAAOrD,EAAP,KAAciH,EAAd,KACA1I,QAAQC,IAAI,oBAAqBJ,GACjC,IAAMJ,EAAOI,EAAMJ,KACbY,EAAOR,EAAMF,aA0CnB,GAxCAwF,qBAAU,WACT,GAAI9E,EAAM,CACTL,QAAQC,IAAI,2BAA4BI,GACxCwQ,EAAY,IACZnI,EAAS,MACT,IAAItD,EAAaC,YAAI9G,EAAD,qBAA0B8B,EAAKyB,MAA/B,QACpBwD,YAAeF,GAAYjE,MAAK,SAAAwC,GAC/B3D,QAAQC,IAAI,gBAAiB0D,GAC7B4B,OAAOuL,UAAU,CAChBC,WAAY,SAAAC,GAAQ,sBAAaA,MAC/B7P,MAAK,SAAA8P,GACPjR,QAAQC,IAAI,MAAOgR,GACnB,IAAMC,EAAMvN,EACNwN,EAAM,IAAIC,eAChBD,EAAIE,aAAe,cACnBF,EAAIG,OAAS,SAAChF,GACb,IACC,IAAMiF,EAAOJ,EAAIK,SAEXC,EAAa,IAAIC,WAAWH,GAE5BX,EADK,IAAIK,EAAIU,SAASF,GACRG,KAAH,uDAAwDvR,EAAK+D,UAA7D,yDACjBpE,QAAQC,IAAI,eAAgB2Q,GACxBA,EAASvH,OAAS,GAAKuH,EAAS,GAAGiB,OACtChB,EAAYD,EAAS,GAAGiB,QAExBhB,EAAY,IAEZ,MAAOjL,GACR5F,QAAQC,IAAI,uBAAwB2F,GACpC8C,EAAS9C,KAGXuL,EAAInE,KAAK,MAAOkE,GAChBC,EAAIW,gBAIL,CAACzR,IAEAZ,IAASP,EACZ,OACC,qBAAKuB,UAAU,WAIjB,GAAIgB,EAAO,OACV,cAACoF,EAAA,EAAD,CAAK9F,UAAU,OAAOJ,GAAI,CACzBsI,UAAW,SACXC,cAAe,SACfhG,OAAQ,UAHT,SAKC,mLAIFlD,QAAQC,IAAI,0BAA2BR,GAEvC,IAAMsS,EAAQnB,EAASoB,MAAM,EAAG,KAEhC,OACC,qCACC,eAACnL,EAAA,EAAD,CAAKpG,UAAU,gBAAgBE,GAAI,CAClC+B,MAAO,OACP9B,QAAS,OACTC,eAAgB,SAChBsI,cAAe,MACfC,SAAU,QALX,UAOC,cAAC,GAAD,CAAY/I,KAAMA,IAPnB,IAO4B,uBAAM2G,MAAO,CAAEpD,WAAY,OAAQpB,QAAS,OAA5C,UAAqDnC,EAAKyG,YAA1D,+DAE5B,cAACD,EAAA,EAAD,CACClG,GAAI,CACH+B,MAAO,OACP9B,QAAS,OACTC,eAAgB,SAChBsI,cAAe,MACfC,SAAU,QANZ,SAQE2I,EAAMzI,KAAI,SAAC+F,EAAM/D,GAAP,OAAiB,cAAC,GAAD,CAAuB+D,KAAMA,GAAlB,GAAK/D,YCvEjC2G,GAtBF,WACZ,IACMxS,EADUc,qBAAWlB,GAApBQ,MACYJ,KAGnB,OAFAO,QAAQC,IAAI,yBAA0BR,GAElCA,IAASd,EACJ,wBAIR,cAACkI,EAAA,EAAD,CAAK9F,UAAU,MAAMJ,GAAI,CACxB+B,MAAO,OACP9B,QAAS,OACTC,eAAgB,SAChBsI,cAAe,MACfC,SAAU,QALX,SAOC,+E,oBCWGkB,GAAS,SAAC9J,GACZnC,EAAO6T,UAAU/Q,MAAK,SAACC,GACnBpB,QAAQC,IAAI,iBACZO,EAAS,CACLN,KAAMf,EACNM,KAAMb,OAEX4C,OAAM,SAACC,GACNzB,QAAQC,IAAI,wBAAyBwB,OAuC9B0Q,OAlCf,SAAaxI,GACT,MAA0ByI,qBAAWxS,EAAcJ,OAAYwK,GAA/D,mBAAOnK,EAAP,KAAcW,EAAd,KACAR,QAAQC,IAAI,cAAeJ,GAC3B,IAAMwS,EArCwB,WAC9B,MAAgCvN,mBAAS,MAAzC,mBAAOuN,EAAP,KAAiBC,EAAjB,KAiBA,OAfAnN,qBAAU,WACN,IAAMoN,EAAWlU,EAAOmU,oBACpB,SAAAH,GACIrS,QAAQC,IAAI,aAAcoS,GAGpBC,EADND,GAEkB,SAG1B,OAAO,WACHE,OAEL,IAEIF,EAmBUI,GAEjBzS,QAAQC,IAAI,kBAAmBoS,GAE/BlN,qBAAU,WAEF3E,EADa,OAAb6R,EACS,CAACnS,KAAMf,EACZM,KAAMb,GAED,CAACsB,KAAMf,EACZM,KAAMd,MAEf,CAAC0T,IAEJ,IAAMK,EAAQC,eAEd,OACI,cAACtT,EAAUuT,SAAX,CAAoBjP,MAAO,CAAC9D,QAAOW,WAAU8J,WAA7C,SACI,cAACuI,GAAA,EAAD,CAAeH,MAAOA,EAAtB,SACI,gCACI,cAAC,GAAD,CAAkB/I,MAAOA,EAAOtJ,KAAMgS,IACtC,cAAC,EAAD,IACA,cAAC,GAAD,IACA,cAAC,EAAD,IACA,cAAC,GAAD,YC7DLS,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB7R,MAAK,YAAkD,IAA/C8R,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,OCAdO,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,GAAD,MAEJC,SAASC,eAAe,SAM5BZ,O","file":"static/js/main.23163c54.chunk.js","sourcesContent":["import {initializeApp} from \"firebase/app\";\nimport {getAnalytics} from \"firebase/analytics\";\nimport {getFirestore} from \"firebase/firestore\";\nimport {getAuth, GoogleAuthProvider} from \"firebase/auth\";\nimport {getStorage} from \"firebase/storage\";\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyCGerFrxYZ2_MfRCURUdsqMuD2-9V-B7g4\",\n\tauthDomain: \"readbooks-164200.firebaseapp.com\",\n\tdatabaseURL: \"https://readbooks-164200.firebaseio.com\",\n\tprojectId: \"readbooks-164200\",\n\tstorageBucket: \"readbooks-164200.appspot.com\",\n\tmessagingSenderId: \"451518411017\",\n\tappId: \"1:451518411017:web:cced9b89a6030da16963d8\",\n\tmeasurementId: \"G-8WQD7EGSVQ\"\n};\n\nexport const firebaseApp = initializeApp(firebaseConfig);\nexport const fbAnalytics = getAnalytics(firebaseApp);\nexport const fbDB = getFirestore(firebaseApp);\nexport const fbAuth = getAuth(firebaseApp);\nexport const fbStorage = getStorage(firebaseApp)\nexport const googleAuthProvider = new GoogleAuthProvider();","\nexport const SCREEN_MODE_INIT = \"init\";\nexport const SCREEN_MODE_SIGN_IN = \"sign-in\";\nexport const SCREEN_MODE_USER_RANK_DAILY = \"user-rank-daily\";\nexport const SCREEN_MODE_USER_RANK_WEEKLY = \"user-rank-weekly\";\nexport const SCREEN_MODE_USER_RANK_MONTHLY = \"user-rank-monthly\";\nexport const SCREEN_MODE_GOOD_WRITER = \"good-writer\";\nexport const SCREEN_MODE_FAMOUS_BOOK = \"famous-book\";\nexport const SCREEN_MODE_RECENT_REVIEW = \"recent-review\";\nexport const SCREEN_MODE_BEST_READER = \"best-reader\";\nexport const SCREEN_MODE_FIND_USER = \"find-user\";\nexport const SCREEN_MODE_BOOK_SHELF = \"book-shelf\";\n\nexport const ACTION_CHANGE_MODE = \"change-mode\";\nexport const ACTION_USER_RANK_DATA_RECEIVED = \"user-rank-data-received\";\nexport const ACTION_USER_SELECTED = \"user-selected\";","import React from 'react';\nimport {\n\tACTION_CHANGE_MODE,\n\tACTION_USER_RANK_DATA_RECEIVED,\n\tACTION_USER_SELECTED,\n\tSCREEN_MODE_BOOK_SHELF,\n\tSCREEN_MODE_INIT\n} from \"../const\";\n\nexport const MyContext = React.createContext({});\n\nexport const initValues = {\n\tmode: SCREEN_MODE_INIT,\n\tuserRankList: null,\n\tselectedUser: null\n}\n\nexport const stateReducer = (state, action) => {\n\tconsole.log(\"reducer called~!\", state, action);\n\tlet newState;\n\tswitch (action.type) {\n\t\tcase ACTION_CHANGE_MODE: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tmode: action.mode\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_USER_RANK_DATA_RECEIVED: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tuserRankList: action.userRankList\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tcase ACTION_USER_SELECTED: {\n\t\t\tnewState = Object.assign({}, state, {\n\t\t\t\tselectedUser: action.user,\n\t\t\t\tmode: SCREEN_MODE_BOOK_SHELF\n\t\t\t})\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tnewState = initValues;\n\t}\n\tconsole.log(\"reducer return ===>\", newState);\n\treturn newState;\n}\n\nexport default stateReducer;","import {ACTION_CHANGE_MODE, SCREEN_MODE_SIGN_IN, SCREEN_MODE_USER_RANK_DAILY} from \"../const\";\nimport {fbAuth, googleAuthProvider} from \"../firebase/features\";\nimport {GoogleAuthProvider, signInWithPopup} from \"firebase/auth\";\nimport {useContext} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {Button, Container} from \"@mui/material\";\n\n\nconst login = (dispatch) => {\n\tsignInWithPopup(fbAuth, googleAuthProvider)\n\t\t.then((result) => {\n\t\t\t// This gives you a Google Access Token. You can use it to access the Google API.\n\t\t\tconst credential = GoogleAuthProvider.credentialFromResult(result);\n\t\t\tconst token = credential.accessToken;\n\t\t\t// The signed-in user info.\n\t\t\tconst user = result.user;\n\t\t\t// ...\n\t\t\tconsole.log(\"로그인 완료~!!\", user, token);\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: SCREEN_MODE_USER_RANK_DAILY})\n\t\t}).catch((error) => {\n\t\t// Handle Errors here.\n\t\tconst errorCode = error.code;\n\t\tconst errorMessage = error.message;\n\t\t// The email of the user's account used.\n\t\tconst email = error.email;\n\t\t// The AuthCredential type that was used.\n\t\tconst credential = GoogleAuthProvider.credentialFromError(error);\n\t\tconsole.log('error=>', errorCode, errorMessage, email, credential);\n\t\tconsole.log(\"로그인 실패~!!\");\n\t});\n}\n\n\nconst Signin = () => {\n\tconst {state, dispatch} = useContext(MyContext);\n\tconsole.log('Signin state=>', state);\n\n\tconst mode = state.mode;\n\n\tconsole.log('signin render()', mode)\n\tif (mode !== SCREEN_MODE_SIGN_IN) {\n\t\tconsole.log(\"signin hidden return\")\n\t\treturn (\n\t\t\t<div className=\"hidden\"/>\n\t\t)\n\t}\n\tconsole.log(\"signin general return\")\n\treturn (\n\t\t<Container sx={{\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center',\n\t\t\talignItems: 'center',\n\t\t\tmarginTop: 20\n\t\t}}>\n\t\t\t<Button onClick={\n\t\t\t\t()=> {\n\t\t\t\t\tlogin(dispatch);\n\t\t\t\t}\n\t\t\t}>Google 로 로그인</Button>\n\t\t</Container>\n\t)\n}\n\nexport default Signin;","import {Card,Slider} from \"@mui/material\";\nimport cx from 'clsx';\nimport {memo, useContext, useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbDB, fbStorage} from \"../firebase/features\";\nimport {doc, getDoc} from \"firebase/firestore\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport {\n\tACTION_USER_SELECTED,\n\tSCREEN_MODE_GOOD_WRITER,\n\tSCREEN_MODE_USER_RANK_DAILY,\n\tSCREEN_MODE_USER_RANK_MONTHLY,\n\tSCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {MyContext} from \"../hooks/reducer\";\nimport Box from \"@mui/material/Box\";\nimport Avatar from \"@mui/material/Avatar\";\n\nconst useStyles = makeStyles(({spacing, palette}) => {\n\n\tconst family =\n\t\t'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"';\n\treturn {\n\t\tcard: {\n\t\t\tdisplay: 'flex',\n\t\t\tpadding: spacing(2),\n\t\t\tminWidth: 288,\n\t\t\twidth: 350,\n\t\t\tmargin: spacing(1),\n\t\t\tborderRadius: 12,\n\t\t\tboxShadow: '0 2px 4px 0 rgba(138, 148, 159, 0.2)',\n\t\t\t'& > *:nth-child(1)': {\n\t\t\t\tmarginRight: spacing(2),\n\t\t\t},\n\t\t\t'& > *:nth-child(2)': {\n\t\t\t\tflex: 'auto',\n\t\t\t},\n\t\t\tcursor: 'pointer'\n\t\t},\n\t\tavatar: {\n\t\t\twidth: 100,\n\t\t\theight: 100\n\t\t},\n\t\theading: {\n\t\t\tfontFamily: family,\n\t\t\tfontSize: 16,\n\t\t\tmarginBottom: 0,\n\t\t},\n\t\tsubheader: {\n\t\t\tfontFamily: family,\n\t\t\tfontSize: 14,\n\t\t\tcolor: palette.grey[600],\n\t\t\tletterSpacing: '1px',\n\t\t\tmarginBottom: 4,\n\t\t},\n\t\tvalue: {\n\t\t\tmarginLeft: 8,\n\t\t\tfontSize: 14,\n\t\t\tcolor: palette.grey[500],\n\t\t},\n\t};\n});\n\nconst useSliderStyles = makeStyles(() => ({\n\troot: {\n\t\theight: 4,\n\t},\n\trail: {\n\t\tborderRadius: 10,\n\t\theight: 4,\n\t\tbackgroundColor: 'rgb(202,211,216)',\n\t},\n\ttrack: {\n\t\tborderRadius: 10,\n\t\theight: 4,\n\t\tbackgroundColor: 'rgb(117,156,250)',\n\t},\n\tthumb: {\n\t\tdisplay: 'none',\n\t},\n}));\n\nconst queryClientInfo = async (email, profileId) => {\n\tconst q = doc(fbDB, 'ClientInfoDataBase', `${email}_${profileId}`);\n\treturn await getDoc(q);\n}\n\nconst handleCardClick = (dispatch, clientInfo) => {\n\tdispatch({type: ACTION_USER_SELECTED, user: clientInfo});\n}\n\nconst UserCard = memo(({userItem, screenMode}) => {\n\tconst {dispatch} = useContext(MyContext);\n\tconst userUrl = userItem.email ? `${userItem.email}_${userItem.profileId}`: '';\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [clientInfo, setClientInfo] = useState({});\n\tconsole.log(\"UserCard render()...\", userItem);\n\n\tuseEffect(() => {\n\t\ttry {\n\t\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('download_url=', value)\n\t\t\t\twindow.localStorage.setItem(userUrl, JSON.stringify(value));\n\t\t\t\tsetImageUrl(value)\n\t\t\t});\n\t\t} catch (e) {\n\n\t\t}\n\t}, [userItem, userUrl]);\n\n\tuseEffect(()=> {\n\t\ttry {\n\t\t\tqueryClientInfo(userItem.email, userItem.profileId).then(doc => {\n\t\t\t\tconsole.log(\"clientInfo =>\", doc.data());\n\t\t\t\tsetClientInfo(doc.data());\n\t\t\t});\n\t\t} catch (e) {\n\n\t\t}\n\n\t}, [userItem]);\n\n\tlet prefix = '';\n\tlet postfix = ' 읽었습니다.';\n\n\tif (screenMode === SCREEN_MODE_USER_RANK_DAILY) {\n\t\tprefix = \" 오늘 \";\n\t} else if (screenMode === SCREEN_MODE_USER_RANK_WEEKLY) {\n\t\tprefix = \" 이번 주 \";\n\t} else if (screenMode === SCREEN_MODE_USER_RANK_MONTHLY) {\n\t\tprefix = \" 이번 달 \";\n\t} else if (screenMode === SCREEN_MODE_GOOD_WRITER) {\n\t\tprefix = \" 좋아요: \";\n\t\tpostfix = \"\";\n\t}\n\n\tconst styles = useStyles();\n\tconst sliderStyles = useSliderStyles();\n\n\tconst progressValue = clientInfo && clientInfo.read && clientInfo.goal ?\n\t\tMath.floor((clientInfo.read * 100) / clientInfo.goal) : 0;\n\n\treturn (\n\t\t<Card className={cx(styles.card)} elevation={0}\n\t\t      onClick={() => {handleCardClick(dispatch, clientInfo);}}>\n\t\t\t<Avatar src={imageUrl} className={styles.avatar} />\n\t\t\t<Box>\n\t\t\t\t<h3 className={styles.heading}>{clientInfo.profileName}</h3>\n\t\t\t\t<p className={styles.subheader}>{clientInfo.age}세 •\n\t\t\t\t\t{prefix} <span style={{color: \"brown\"}}>{\n\t\t\t\t\t\tscreenMode === SCREEN_MODE_GOOD_WRITER ?\n\t\t\t\t\t\t\tuserItem.like: userItem.read}</span> {postfix}\n\t\t\t\t</p>\n\t\t\t\t<Box display={'flex'} alignItems={'center'}>\n\t\t\t\t\t<Slider classes={sliderStyles} value={progressValue}/>\n\t\t\t\t\t<span className={styles.value}>{clientInfo.read}/{clientInfo.goal}</span>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Card>\n\t);\n});\n\nexport default UserCard;","import {\n    SCREEN_MODE_BEST_READER,\n    SCREEN_MODE_FAMOUS_BOOK,\n    SCREEN_MODE_GOOD_WRITER,\n    SCREEN_MODE_RECENT_REVIEW,\n    SCREEN_MODE_USER_RANK_DAILY,\n    SCREEN_MODE_USER_RANK_MONTHLY,\n    SCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {collection, getDocs, limit, orderBy, query, where} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport UserCard from \"./UserCard\";\nimport Box from \"@mui/material/Box\";\n\n\nconst getWeekOfYear = (currentDate) => {\n    const oneJan = new Date(currentDate.getFullYear(),0,1);\n    const numberOfDays = Math.floor((currentDate - oneJan) / (24 * 60 * 60 * 1000));\n    return Math.floor((currentDate.getDay() + 1 + numberOfDays) / 7);\n}\n\nconst queryCallAsync = async (mode) => {\n    const date = new Date();\n    let path = ``;\n    let q = null;\n\n    console.log(mode);\n\n    const retrieveNum = 50;\n\n    if (mode === SCREEN_MODE_USER_RANK_DAILY) {\n        path = `UserRank/Rank_Day_${date.getFullYear()}_${date.getMonth() + 1}_${date.getDate()}/Rank_Day_${date.getFullYear()}_${date.getMonth() + 1}_${date.getDate()}`;\n    } else if (mode === SCREEN_MODE_USER_RANK_WEEKLY) {\n        path = `UserRank/Rank_Week_${date.getFullYear()}_${getWeekOfYear(date)}/Rank_Week_${date.getFullYear()}_${getWeekOfYear(date)}`;\n    } else if (mode === SCREEN_MODE_USER_RANK_MONTHLY) {\n        path = `UserRank/Rank_Month_${date.getFullYear()}_${date.getMonth() + 1}/Rank_Month_${date.getFullYear()}_${date.getMonth() + 1}`;\n    } else if (mode === SCREEN_MODE_BEST_READER) {\n        path = `ClientInfoDataBase`;\n    } else if (mode === SCREEN_MODE_GOOD_WRITER) {\n        path = \"ClientInfoDataBase\";\n        q = query(collection(fbDB, path), where(\"like\", \">\", 0), orderBy(\"like\", \"desc\"), limit(retrieveNum));\n    } else if (mode === SCREEN_MODE_FAMOUS_BOOK) {\n        path = 'Books';\n    } else if (mode === SCREEN_MODE_RECENT_REVIEW) {\n        path = \"MessageDataBase\";\n        q = query(collection(fbDB, path), orderBy(\"updatedDate\", \"desc\"), limit(retrieveNum));\n    }\n    console.log(\"query path = \", path);\n\n    if (!path) {\n        return new Promise((resolve) => {\n            resolve([]);\n        });\n    }\n\n    if (q === null)\n        q = query(collection(fbDB, path), where(\"read\", \">\", 0), orderBy(\"read\", \"desc\"), limit(retrieveNum));\n    return await getDocs(q)\n}\n\nconst UserList = () => {\n    const {state} = useContext(MyContext);\n    const [error, setError] = useState(null);\n    const [userList, setUserList] = useState(null);\n    const mode = state.mode;\n    console.log('################ UserList render() userList=>', mode, userList);\n\n    useEffect( () => {\n        try {\n            setError(null);\n            setUserList(null);\n            queryCallAsync(mode).then(r => {\n                let itemList = [];\n                r.forEach((doc) => {\n                    const data = doc.data();\n                    itemList.push(data);\n                });\n                console.log(\"UserList ===> itemList ==> \", itemList);\n                setUserList(itemList);\n            });\n        } catch (e) {\n            setError(e);\n        }\n    }, [mode]);\n\n    if (mode !== SCREEN_MODE_USER_RANK_MONTHLY &&\n        mode !== SCREEN_MODE_USER_RANK_WEEKLY &&\n        mode !== SCREEN_MODE_USER_RANK_DAILY &&\n        mode !== SCREEN_MODE_BEST_READER &&\n        mode !== SCREEN_MODE_GOOD_WRITER)\n        return (\n            <div />\n        )\n\n    if (error) return (\n        <Box marginTop='10em' sx={{\n            textAlign: 'center',\n            verticalAlign: 'middle',\n            height: '100rem'\n        }}>\n            <h5>데이터 로딩중에 오류가 발생했습니다. {error}</h5>\n        </Box>\n    );\n\n    if (userList === null) return (\n        <Box marginTop='10em' sx={{\n            textAlign: 'center',\n            verticalAlign: 'middle',\n            height: '100rem'\n        }}>\n            <h5>데이타를 로딩중입니다...</h5>\n        </Box>\n    );\n\n    return (\n        <Box marginTop='5em' sx={{\n            width: '100%',\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'row',\n            flexWrap: 'wrap'\n        }}>\n            {\n                userList && userList.length > 0 ?\n                        userList.map((user, i) => <UserCard key={\"\" + i} userItem={user} screenMode={mode}/>) :\n                    <div>\n                        <h2>데이타를 로딩중입니다...</h2>\n                    </div>\n            }\n        </Box>\n    )\n}\n\nexport default UserList","import * as React from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport Menu from '@mui/material/Menu';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport Container from '@mui/material/Container';\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport Tooltip from '@mui/material/Tooltip';\nimport MenuItem from '@mui/material/MenuItem';\nimport {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {\n\tACTION_CHANGE_MODE,\n\tSCREEN_MODE_BEST_READER,\n\tSCREEN_MODE_FAMOUS_BOOK, SCREEN_MODE_FIND_USER,\n\tSCREEN_MODE_GOOD_WRITER, SCREEN_MODE_INIT, SCREEN_MODE_RECENT_REVIEW, SCREEN_MODE_SIGN_IN,\n\tSCREEN_MODE_USER_RANK_DAILY, SCREEN_MODE_USER_RANK_MONTHLY,\n\tSCREEN_MODE_USER_RANK_WEEKLY\n} from \"../const\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\nimport {Slide, useScrollTrigger} from \"@mui/material\";\nimport PropTypes from \"prop-types\";\n\nconst pages = [\n\t{\n\t\tmode: SCREEN_MODE_GOOD_WRITER,\n\t\tvalue: '좋은 글을 쓰는 친구들',\n\t},\n\t// {\n\t// \tmode: SCREEN_MODE_FAMOUS_BOOK,\n\t// \tvalue: '인기 도서'\n\t// },\n\t// {\n\t// \tmode: SCREEN_MODE_RECENT_REVIEW,\n\t// \tvalue: '리뷰'\n\t// },\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_DAILY,\n\t\tvalue: '오늘의 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_WEEKLY,\n\t\tvalue: '주간 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_USER_RANK_MONTHLY,\n\t\tvalue: '월간 독서왕'\n\t},\n\t{\n\t\tmode: SCREEN_MODE_BEST_READER,\n\t\tvalue: '베스트 리더'\n\t},\n\t// {\n\t// \tmode: SCREEN_MODE_FIND_USER,\n\t// \tvalue: '친구 찾기'\n\t// }\n];\n\nconst settings = ['Profile', 'Account', 'Dashboard', 'Logout'];\n\nconst HideOnScroll = (props) => {\n\tconst { children, window } = props;\n\t// Note that you normally won't need to set the window ref as useScrollTrigger\n\t// will default to window.\n\t// This is only being set here because the demo is in an iframe.\n\tconst trigger = useScrollTrigger({\n\t\ttarget: window ? window() : undefined,\n\t});\n\n\treturn (\n\t\t<Slide appear={false} direction=\"down\" in={!trigger}>\n\t\t\t{children}\n\t\t</Slide>\n\t);\n}\n\nHideOnScroll.propTypes = {\n\tchildren: PropTypes.element.isRequired,\n\t/**\n\t * Injected by the documentation to work in an iframe.\n\t * You won't need it on your project.\n\t */\n\twindow: PropTypes.func,\n};\n\nconst getDefaultTitle = (mode) => {\n\n\tconst result = pages.filter(page => mode === page.mode);\n\tif (result.length > 0) {\n\t\tconsole.log(\"getDefaultTitle=>\", result);\n\t\treturn result[0].value;\n\t} else {\n\t\treturn '천권읽기';\n\t}\n}\n\nconst ResponsiveAppBar = (props) => {\n\tconst {state, dispatch, logout} = useContext(MyContext);\n\tconst user = props.user;\n\tconst [anchorElNav, setAnchorElNav] = useState(null);\n\tconst [anchorElUser, setAnchorElUser] = useState(null);\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [title, setTitle] = useState(getDefaultTitle(SCREEN_MODE_INIT));\n\n\tconsole.log(\"ResponsiveAppBar title=>\", title, state.mode);\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\tconst userUrl = `${user.email}`;\n\t\t\tconst downloadUrl = user.photoURL;\n\t\t\tconsole.log(\"ResponsiveAppBar downloadUrl=>\", downloadUrl);\n\n\t\t\tif (!downloadUrl) {\n\t\t\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\t\tconsole.log('Me download_url=', value)\n\t\t\t\t\tsetImageUrl(value)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetImageUrl(downloadUrl);\n\t\t\t}\n\t\t}\n\t}, [user]);\n\n\n\n\tconst handleOpenNavMenu = (event) => {\n\t\tconsole.log(\"handleOpenNavMenu=>\", event.currentTarget);\n\t\tsetAnchorElNav(event.currentTarget);\n\t};\n\tconst handleOpenUserMenu = (event) => {\n\t\tconsole.log(\"handleOpenUserMenu=>\", event.currentTarget);\n\t\tsetAnchorElUser(event.currentTarget);\n\t};\n\n\tconst handleCloseNavMenu = (item) => {\n\t\tconsole.log(\"handleCloseNavMenu\", item);\n\t\tsetAnchorElNav(null);\n\t\tif (item.target.innerText === 'Logout') {\n\t\t\tconsole.log('Logout~!!!')\n\t\t\tsetAnchorElUser(null);\n\t\t\tsetImageUrl('');\n\t\t\tlogout(dispatch);\n\t\t\treturn;\n\t\t}\n\n\t\tif (item.target.dataset.index) {\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: item.target.dataset.index});\n\t\t} else if(item.target.parentElement.dataset.index) {\n\t\t\tsetTitle(item.target.innerText);\n\t\t\tdispatch({type: ACTION_CHANGE_MODE, mode: item.target.parentElement.dataset.index});\n\t\t}\n\t};\n\n\tconst handleCloseUserMenu = () => {\n\t\tsetAnchorElUser(null);\n\t};\n\n\tlet _className='';\n\tif (state.mode === SCREEN_MODE_SIGN_IN) {\n\t\t_className = \"hidden\";\n\t}\n\treturn (\n\t\t<HideOnScroll {...props}>\n\t\t<AppBar>\n\t\t\t<Container maxWidth=\"xl\">\n\t\t\t\t<Toolbar disableGutters>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tsx={{ mr: 2, display: { xs: 'none', md: 'flex' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\t천권읽기\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Box sx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={handleOpenNavMenu}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\tanchorEl={anchorElNav}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\topen={Boolean(anchorElNav)}\n\t\t\t\t\t\t\tonClose={handleCloseNavMenu}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tdisplay: { xs: 'block', md: 'none' },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t\t\t<MenuItem key={page.mode}\n\t\t\t\t\t\t\t\t          data-index={page.mode} onClick={handleCloseNavMenu}>\n\t\t\t\t\t\t\t\t\t<Typography textAlign=\"center\">{page.value}</Typography>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\tsx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' } }}>\n\t\t\t\t\t\t{pages.map((page) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tkey={page.mode}\n\t\t\t\t\t\t\t\tdata-index={page.mode}\n\t\t\t\t\t\t\t\tonClick={handleCloseNavMenu}\n\t\t\t\t\t\t\t\tsx={{ my: 2, color: 'white', display: 'block' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page.value}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box sx={{ flexGrow: 0 }}>\n\t\t\t\t\t\t<Tooltip title=\"Open settings\">\n\t\t\t\t\t\t\t<IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n\t\t\t\t\t\t\t\t<Avatar alt=\"Remy Sharp\" src={imageUrl} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tsx={{ mt: '45px' }}\n\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\tanchorEl={anchorElUser}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\topen={Boolean(anchorElUser)}\n\t\t\t\t\t\t\tonClose={handleCloseUserMenu}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{settings.map((setting) => (\n\t\t\t\t\t\t\t\t<MenuItem key={setting} onClick={handleCloseNavMenu}>\n\t\t\t\t\t\t\t\t\t<Typography textAlign=\"center\">{setting}</Typography>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Box>\n\t\t\t\t</Toolbar>\n\t\t\t</Container>\n\t\t</AppBar>\n\t\t</HideOnScroll>\n\t);\n};\n\nexport default ResponsiveAppBar;\n","import Avatar from \"@mui/material/Avatar\";\nimport {useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\n\n\nconst UserAvatar = ({user}) => {\n\tconst [imageLink, setImageLink] = useState(null);\n\tconst userUrl = user.email ? `${user.email}_${user.profileId}`: '';\n\n\tconsole.log(\"UserAvatar====>\", user);\n\tuseEffect(() => {\n\t\tlet storageRef = ref(fbStorage, `/profile_thumbnails/${userUrl}.png`)\n\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\tconsole.log('download_url=', value)\n\t\t\tsetImageLink(value)\n\t\t});\n\t}, [user, userUrl]);\n\n\treturn (\n\t\t<Avatar src={imageLink} alt=\"No image\"/>\n\t);\n}\n\nexport default UserAvatar;","import * as React from 'react';\nimport Stack from '@mui/material/Stack';\nimport UserAvatar from \"./UserAvatar\";\n\nconst AvatarList = ({users}) => {\n\n\tlet avatar_list = []\n\tusers.forEach(user => {\n\t\tavatar_list.push(<UserAvatar user={user} />);\n\t})\n\n\n\treturn (\n\t\t<Stack\n\t\t\tmt={2} direction=\"row\" spacing={2}>\n\t\t\t{avatar_list}\n\t\t</Stack>\n\t);\n}\n\nexport default AvatarList;","import {ListItem, ListItemAvatar, ListItemText} from \"@mui/material\";\nimport UserAvatar from \"./UserAvatar\";\nimport {doc, getDoc} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport {useEffect, useState} from \"react\";\n\nconst queryClientInfo = async (email, profileId) => {\n\tconst q = doc(fbDB, 'ClientInfoDataBase', `${email}_${profileId}`);\n\treturn await getDoc(q);\n}\n\nconst Review = ({review}) => {\n\tconst [clientInfo, setClientInfo] = useState(null);\n\tconsole.log(\"Review =======> \", review);\n\n\tconst user = {\n\t\temail: review.writerEmail,\n\t\tprofileId: review.writerProfileId\n\t};\n\n\tuseEffect(() => {\n\t\tqueryClientInfo(user.email, user.profileId).then(doc => {\n\t\t\tconsole.log(\"clientInfo =>\", doc.data());\n\t\t\tsetClientInfo(doc.data());\n\t\t});\n\t}, [user.email, user.profileId])\n\n\treturn (\n\t\t<ListItem alignItems=\"flex-start\">\n\t\t\t<ListItemAvatar>\n\t\t\t\t<UserAvatar alt=\"No image\" user={user}/>\n\t\t\t</ListItemAvatar>\n\t\t\t<ListItemText\n\t\t\t\tprimary={\n\t\t\t\t\tclientInfo?\n\t\t\t\t\t\tclientInfo.profileName:\"\"\n\t\t\t\t}\n\t\t\t\tsecondary={\n\t\t\t\t\treview.bodyMessage\n\t\t\t\t}\n\t\t\t/>\n\t\t</ListItem>\n\t);\n}\n\nexport default Review;","import {useEffect, useState} from \"react\";\nimport {CircularProgress, List} from \"@mui/material\";\nimport {collection, getDocs, limit, orderBy, query, where} from \"firebase/firestore\";\nimport {fbDB} from \"../firebase/features\";\nimport Review from \"./Review\";\nimport Typography from \"@mui/material/Typography\";\n\nconst queryReviewListAsync = async (isbn) => {\n\tconst q = query(collection(fbDB, 'MessageDataBase'), where(\"isbn\", \"==\", isbn), orderBy(\"updatedDate\", \"desc\"), limit(20));\n\treturn await getDocs(q)\n}\n\nconst ReviewList = ({isbn}) => {\n\tconst [reviewList, setReviewList] = useState(null);\n\tconsole.log(\"ReviewList ===>\", isbn);\n\n\tuseEffect( () => {\n\t\tqueryReviewListAsync(isbn).then(r => {\n\t\t\tlet itemList = [];\n\t\t\tr.forEach((doc) => {\n\t\t\t\tconst data = doc.data();\n\t\t\t\titemList.push(\n\t\t\t\t\t<Review review={data}/>\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetReviewList(itemList);\n\t\t});\n\t}, [isbn]);\n\n\treturn (\n\t\t\treviewList ?\n\t\t\t\t(reviewList.length === 0) ?\n\t\t\t\t\t<Typography style={{textAlign:'center'}} id=\"modal-modal-description\" sx={{ mt: 2 }}>작성된 리뷰가 없습니다. </Typography>:\n\t\t\t\t\t<List>{reviewList}</List> :\n\t\t\t\t\t\t<CircularProgress/>\n\t);\n}\n\nexport default ReviewList;","import {\n\tButton,\n\tCircularProgress,\n\tContainer,\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tDialogTitle, Divider\n} from \"@mui/material\";\nimport {useEffect, useState} from \"react\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbDB, fbStorage} from \"../firebase/features\";\nimport './Book.css';\nimport {doc, getDoc} from \"firebase/firestore\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport AvatarList from \"./AvatarList\";\nimport ReviewList from \"./ReviewList\";\n\nconst dialogStyle = {\n\tdisplay: 'flex',\n    justifyContent: 'center',\n\tflexDirection: 'row',\n\tflexWrap: 'wrap'\n}\n\nconst queryBookDetails = async (isbn) => {\n\tconst q = doc(fbDB, 'Books', isbn);\n\treturn await getDoc(q);\n}\n\nconst LoadBookDetails = (isbn, setBookDetails, setImageBigUrl) => {\n\tconsole.log('LoadBookDetails ====> ', isbn);\n\tqueryBookDetails(isbn).then(r => {\n\t\tconst bookDetails = r.data();\n\t\tconsole.log('LoadBookDetails Success !!!! ====> ', r.data());\n\t\tif (bookDetails.imageLinkBig) {\n\t\t\tconsole.log('LoadBookDetails imageLinkBig==>', bookDetails.imageLinkBig);\n\t\t\tsetImageBigUrl(bookDetails.imageLinkBig);\n\t\t}\n\t\tsetBookDetails(r.data());\n\n\t}).catch(e => {\n\t\tconsole.log('LoadBookDetails Error !!!! ====> ', e);\n\t\tsetBookDetails({});\n\t});\n}\n\nconst Book = ({book}) => {\n\tconst [imageUrl, setImageUrl] = useState(null);\n\tconst [imageBigUrl, setImageBigUrl] = useState(null);\n\tconst [open, setOpen] = useState(false);\n\tconst [bookDetails, setBookDetails] = useState(null);\n\tconsole.log('Book===>', imageUrl);\n\n\tlet bookThumbnailUrl = book[11];\n\tif (imageUrl)\n\t\tbookThumbnailUrl = imageUrl;\n\n\tconst handleClickOpen = () => {\n\t\tsetOpen(true);\n\t\t// if (!bookDetails)\n\t\t\tLoadBookDetails(book[12], setBookDetails, setImageBigUrl);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t};\n\n\tconst handleGoto = () => {\n\t\tsetOpen(false);\n\t\twindow.open(book[10]);\n\t};\n\n\tconst handleOnImageError = (e) => {\n\t\tconsole.log('handleOnImageError === ', e.target.src, imageUrl, e);\n\t\tif (e.target.src && imageUrl && e.target.src !== imageUrl)\n\t\t\te.target.src = imageUrl;\n\t}\n\n\tuseEffect(() => {\n\t\tif (bookThumbnailUrl.startsWith(\"gs://\")) {\n\t\t\tlet storageRef = ref(fbStorage, bookThumbnailUrl);\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('BookThumbnail download_url=', value);\n\t\t\t\tsetImageUrl(value)\n\t\t\t});\n\t\t} else {\n\t\t\tsetImageUrl(bookThumbnailUrl);\n\t\t}\n\t}, []);\n\n\tconst readDate = +book[14];\n\tconst date = new Date(readDate);\n\tconsole.log('read date=', date);\n\tconst dateStr = `${date.getFullYear()}년 ${date.getMonth()+1}월 ${date.getDate()}일`;\n\n\treturn (\n\t\t<div>\n\t\t\t<Container className=\"bookImgContainer\">\n\t\t\t\t{\n\t\t\t\t\timageUrl && imageUrl.startsWith(\"http\") ?\n\t\t\t\t\t\t<img onClick={handleClickOpen} className='bookImg' src={imageUrl} alt={book[2]}/>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div onClick={handleClickOpen} className=\"image\">\n\t\t\t\t\t\t\t<img className='bookImg' src=\"\" alt=\"\"/>\n\t\t\t\t\t\t\t\t<div className=\"text\">\n\t\t\t\t\t\t\t\t\t<h6>{book[2]}</h6>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</Container>\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonClose={handleClose}\n\t\t\t\taria-labelledby=\"customized-dialog-title\"\n\t\t\t\taria-describedby=\"modal-modal-description\"\n\t\t\t\tscroll={'paper'}\n\t\t\t\tclassName=\"dialogStyle\"\n\t\t\t>\n\t\t\t\t<DialogContent id=\"modal-modal-description\" sx={{ mt: 2 }}>\n\t\t\t\t\t<DialogTitle id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n\t\t\t\t\t\t{book[2]}\n\t\t\t\t\t</DialogTitle>\n\n\t\t\t\t\t<Box sx={dialogStyle}>\n\t\t\t\t\t\t<img className='bookImgLarge' src={imageBigUrl? imageBigUrl: imageUrl? imageUrl: \"\"} alt={book[2]}\n\t\t\t\t\t\t     onError={handleOnImageError}/>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n\t\t\t\t\t\t<span style={{color: 'red'}}>{dateStr}</span>에 읽었습니다.\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{\n\t\t\t\t\t\t(bookDetails !== null) ?\n\t\t\t\t\t\t\tbookDetails.read ?\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n\t\t\t\t\t\t\t\t\t\t천권읽기 회원 총 <span style={{color: 'red'}}>{bookDetails.read}</span> 명이 읽었습니다.\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t\t\t\t\t<AvatarList style={{\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\t\t\t\t\t\t\tflexWrap: 'wrap'\n\t\t\t\t\t\t\t\t\t\t}} users={bookDetails.readPeople}/>\n\t\t\t\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t\t\t</div>: <div/> : <CircularProgress />\n\n\t\t\t\t\t}\n\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t<Typography id=\"modal-modal-description\" sx={{ mt: 3 }}>\n\t\t\t\t\t\t\t{book[7]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</DialogContentText>\n\n\t\t\t\t\t<Divider sx={{mt:2}}/>\n\t\t\t\t\t<ReviewList isbn={book[12]}/>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t{\n\t\t\t\t\t\tbook[10] ?\n\t\t\t\t\t\t\t<Button onClick={handleGoto}>이 책에 대한 자세한 내용 보러가기</Button> :\n\t\t\t\t\t\t\t<div/>\n\t\t\t\t\t}\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t)\n}\n\nexport default Book;","import {useContext, useEffect, useState} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {SCREEN_MODE_BOOK_SHELF} from \"../const\";\nimport {getDownloadURL, ref} from \"firebase/storage\";\nimport {fbStorage} from \"../firebase/features\";\nimport Book from \"./Book\";\nimport Box from \"@mui/material/Box\";\nimport UserAvatar from \"./UserAvatar\";\nimport './Book.css';\n\n\nconst BookShelf = () => {\n\tconst {state} = useContext(MyContext);\n\tconst [contents, setContents] = useState([]);\n\tconst [error, setError] = useState(null);\n\tconsole.log('BookShelf state=>', state);\n\tconst mode = state.mode;\n\tconst user = state.selectedUser;\n\n\tuseEffect(()=> {\n\t\tif (user) {\n\t\t\tconsole.log('BookShelf download db...', user);\n\t\t\tsetContents([]);\n\t\t\tsetError(null);\n\t\t\tlet storageRef = ref(fbStorage, `/databases/${user.email}.db`)\n\t\t\tgetDownloadURL(storageRef).then(value => {\n\t\t\t\tconsole.log('download_url=', value)\n\t\t\t\twindow.initSqlJs({\n\t\t\t\t\tlocateFile: filename => `/dist/${filename}`\n\t\t\t\t}).then(SQL => {\n\t\t\t\t\tconsole.log(\"SQL\", SQL);\n\t\t\t\t\tconst url = value;\n\t\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\t\txhr.responseType = 'arraybuffer';\n\t\t\t\t\txhr.onload = (event) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst blob = xhr.response;\n\t\t\t\t\t\t\t// console.log(\"downloaded blob=\", typeof(blob), blob);\n\t\t\t\t\t\t\tconst uInt8Array = new Uint8Array(blob);\n\t\t\t\t\t\t\tconst db = new SQL.Database(uInt8Array);\n\t\t\t\t\t\t\tconst contents = db.exec(`SELECT * FROM tbl_favorite WHERE profileid = ${user.profileId} AND pagecount >= 0 ORDER BY readdate DESC LIMIT 100`);\n\t\t\t\t\t\t\tconsole.log(\"contents ==>\", contents);\n\t\t\t\t\t\t\tif (contents.length > 0 && contents[0].values) {\n\t\t\t\t\t\t\t\tsetContents(contents[0].values);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetContents([]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(\"database error ~~~> \", e);\n\t\t\t\t\t\t\tsetError(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\txhr.open('GET', url);\n\t\t\t\t\txhr.send();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}, [user]);\n\n\tif (mode !== SCREEN_MODE_BOOK_SHELF) {\n\t\treturn (\n\t\t\t<div className=\"hidden\"/>\n\t\t)\n\t}\n\n\tif (error) return (\n\t\t<Box marginTop='10em' sx={{\n\t\t\ttextAlign: 'center',\n\t\t\tverticalAlign: 'middle',\n\t\t\theight: '100rem'\n\t\t}}>\n\t\t\t<h5>사용자의 데이터베이스 로딩중에 오류가 발생했습니다.</h5>\n\t\t</Box>\n\t);\n\n\tconsole.log('BookShelf render() ===>', mode)\n\n\tconst books = contents.slice(0, 100);\n\n\treturn (\n\t\t<>\n\t\t\t<Box className=\"bookShelfCard\" sx={{\n\t\t\t\twidth: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\tflexDirection: 'row',\n\t\t\t\tflexWrap: 'wrap'\n\t\t\t}}>\n\t\t\t\t<UserAvatar user={user} /> <span style={{ marginLeft: '10px', padding: '5px'}}>{user.profileName} • (최근에 읽은 책들)</span>\n\t\t\t</Box>\n\t\t\t<Box\n\t\t\t\tsx={{\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\tflexWrap: 'wrap'\n\t\t\t\t}}>\n\t\t\t\t{books.map((book, index) => <Book key={\"\" + index} book={book}/>)}\n\t\t\t</Box>\n\t\t</>\n\t)\n}\n\nexport default BookShelf;","import Box from \"@mui/material/Box\";\nimport {useContext} from \"react\";\nimport {MyContext} from \"../hooks/reducer\";\nimport {SCREEN_MODE_INIT} from \"../const\";\n\nconst Home = () => {\n\tconst {state} = useContext(MyContext);\n\tconst mode = state.mode;\n\tconsole.log(\"Home render() ======> \", mode);\n\n\tif (mode !== SCREEN_MODE_INIT) {\n\t\treturn (<div />);\n\t}\n\n\treturn (\n\t\t<Box marginTop='5em' sx={{\n\t\t\twidth: '100%',\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'center',\n\t\t\tflexDirection: 'row',\n\t\t\tflexWrap: 'wrap'\n\t\t}}>\n\t\t\t<h3> 홈 화면입니다....</h3>\n\t\t</Box>\n\t)\n}\n\nexport default Home;","import {fbAuth} from \"./firebase/features\";\nimport {useEffect, useReducer, useState} from \"react\";\nimport {ACTION_CHANGE_MODE, SCREEN_MODE_INIT, SCREEN_MODE_SIGN_IN} from \"./const\";\nimport Signin from \"./components/Signin\";\nimport UserList from \"./components/UserList\";\nimport stateReducer, {initValues, MyContext} from \"./hooks/reducer\";\nimport ResponsiveAppBar from \"./components/ResponsiveAppBar\";\nimport BookShelf from \"./components/BookShelf\";\nimport Home from \"./components/Home\";\nimport {ThemeProvider} from \"@mui/styles\";\nimport {createTheme} from \"@mui/material\";\n\nconst useFirebaseAuthentication = () => {\n    const [authUser, setAuthUser] = useState(null);\n\n    useEffect(() =>{\n        const unlisten = fbAuth.onAuthStateChanged(\n            authUser => {\n                console.log(\"authUser=>\", authUser);\n\n                authUser\n                    ? setAuthUser(authUser)\n                    : setAuthUser(null);\n            },\n        );\n        return () => {\n            unlisten();\n        }\n    }, []);\n\n    return authUser\n}\n\nconst logout = (dispatch) => {\n    fbAuth.signOut().then((result)=> {\n        console.log(\"signed out~!!\");\n        dispatch({\n            type: ACTION_CHANGE_MODE,\n            mode: SCREEN_MODE_SIGN_IN\n        });\n    }).catch((error)=> {\n        console.log(\"signed out failed~!!!\", error)\n    });\n}\n\n\nfunction App(props) {\n    const [state, dispatch] = useReducer(stateReducer, initValues, undefined);\n    console.log(\"App state=>\", state);\n    const authUser = useFirebaseAuthentication();\n\n    console.log(\"app render()...\", authUser);\n\n    useEffect(()=>{\n        if (authUser === null) {\n            dispatch({type: ACTION_CHANGE_MODE,\n                mode: SCREEN_MODE_SIGN_IN});\n        } else {\n            dispatch({type: ACTION_CHANGE_MODE,\n                mode: SCREEN_MODE_INIT});\n        }\n    }, [authUser]);\n\n    const theme = createTheme();\n\n    return (\n        <MyContext.Provider value={{state, dispatch, logout}}>\n            <ThemeProvider theme={theme}>\n                <div>\n                    <ResponsiveAppBar props={props} user={authUser} />\n                    <Signin />\n                    <Home />\n                    <UserList />\n                    <BookShelf />\n                </div>\n            </ThemeProvider>\n        </MyContext.Provider>\n    );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}